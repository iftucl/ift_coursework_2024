

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>django.contrib.gis.db.models.lookups &mdash; Coursework Two 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html" class="icon icon-home">
            Coursework Two
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../installation_guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../usage_instructions.html">Usage Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../architecture_overview.html">Architecture Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">Coursework Two</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../../../django.html">django</a></li>
      <li class="breadcrumb-item active">django.contrib.gis.db.models.lookups</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for django.contrib.gis.db.models.lookups</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.gis.db.models.fields</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSpatialField</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.gis.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">Distance</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">NotSupportedError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Expression</span><span class="p">,</span> <span class="n">Lookup</span><span class="p">,</span> <span class="n">Transform</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db.models.sql.query</span><span class="w"> </span><span class="kn">import</span> <span class="n">Query</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.regex_helper</span><span class="w"> </span><span class="kn">import</span> <span class="n">_lazy_re_compile</span>


<div class="viewcode-block" id="RasterBandTransform">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RasterBandTransform">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RasterBandTransform</span><span class="p">(</span><span class="n">Transform</span><span class="p">):</span>
<div class="viewcode-block" id="RasterBandTransform.as_sql">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RasterBandTransform.as_sql">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">as_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">compiler</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="GISLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GISLookup</span><span class="p">(</span><span class="n">Lookup</span><span class="p">):</span>
<div class="viewcode-block" id="GISLookup.sql_template">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.sql_template">[docs]</a>
    <span class="n">sql_template</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="GISLookup.transform_func">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.transform_func">[docs]</a>
    <span class="n">transform_func</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="GISLookup.distance">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.distance">[docs]</a>
    <span class="n">distance</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="GISLookup.band_rhs">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.band_rhs">[docs]</a>
    <span class="n">band_rhs</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="GISLookup.band_lhs">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.band_lhs">[docs]</a>
    <span class="n">band_lhs</span> <span class="o">=</span> <span class="kc">None</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
        <span class="n">rhs</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span> <span class="o">=</span> <span class="n">rhs</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="k">else</span> <span class="p">[</span><span class="n">rhs</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
<div class="viewcode-block" id="GISLookup.template_params">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.template_params">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_params</span> <span class="o">=</span> <span class="p">{}</span></div>

        <span class="bp">self</span><span class="o">.</span><span class="n">process_rhs_params</span><span class="p">()</span>

<div class="viewcode-block" id="GISLookup.process_rhs_params">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.process_rhs_params">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_rhs_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">:</span>
            <span class="c1"># Check if a band index was passed in the query argument.</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_name</span> <span class="o">==</span> <span class="s2">&quot;relate&quot;</span> <span class="k">else</span> <span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">process_band_indices</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Tuple too long for lookup </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="p">,</span> <span class="n">RasterBandTransform</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_band_indices</span><span class="p">(</span><span class="n">only_lhs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="GISLookup.process_band_indices">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.process_band_indices">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_band_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">only_lhs</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract the lhs band index from the band transform class and the rhs</span>
<span class="sd">        band index from the input tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># PostGIS band indices are 1-based, so the band index needs to be</span>
        <span class="c1"># increased to be consistent with the GDALRaster band indices.</span>
        <span class="k">if</span> <span class="n">only_lhs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">band_rhs</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">band_lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="o">.</span><span class="n">band_index</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="p">,</span> <span class="n">RasterBandTransform</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">band_lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="o">.</span><span class="n">band_index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">band_lhs</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">band_rhs</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span></div>


<div class="viewcode-block" id="GISLookup.get_db_prep_lookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.get_db_prep_lookup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_db_prep_lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="c1"># get_db_prep_lookup is called by process_rhs from super class</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">connection</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">Adapter</span><span class="p">(</span><span class="n">value</span><span class="p">)])</span></div>


<div class="viewcode-block" id="GISLookup.process_rhs">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.process_rhs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_rhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Query</span><span class="p">):</span>
            <span class="c1"># If rhs is some Query, don&#39;t touch it.</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_rhs</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="o">.</span><span class="n">resolve_expression</span><span class="p">(</span><span class="n">compiler</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="n">rhs</span><span class="p">,</span> <span class="n">rhs_params</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_rhs</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="n">placeholder</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">get_geom_placeholder</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="o">.</span><span class="n">output_field</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">,</span> <span class="n">compiler</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">placeholder</span> <span class="o">%</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">rhs_params</span></div>


<div class="viewcode-block" id="GISLookup.get_rhs_op">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.get_rhs_op">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
        <span class="c1"># Unlike BuiltinLookup, the GIS get_rhs_op() implementation should return</span>
        <span class="c1"># an object (SpatialOperator) with an as_sql() method to allow for more</span>
        <span class="c1"># complex computations (where the lhs part can be mixed in).</span>
        <span class="k">return</span> <span class="n">connection</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">gis_operators</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_name</span><span class="p">]</span></div>


<div class="viewcode-block" id="GISLookup.as_sql">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.GISLookup.as_sql">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">as_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="n">lhs_sql</span><span class="p">,</span> <span class="n">lhs_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_lhs</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="n">rhs_sql</span><span class="p">,</span> <span class="n">rhs_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_rhs</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="n">sql_params</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">lhs_params</span><span class="p">,</span> <span class="o">*</span><span class="n">rhs_params</span><span class="p">)</span>

        <span class="n">template_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;lhs&quot;</span><span class="p">:</span> <span class="n">lhs_sql</span><span class="p">,</span>
            <span class="s2">&quot;rhs&quot;</span><span class="p">:</span> <span class="n">rhs_sql</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">template_params</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">rhs_op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rhs_op</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">rhs_sql</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rhs_op</span><span class="o">.</span><span class="n">as_sql</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">template_params</span><span class="p">,</span> <span class="n">sql_params</span><span class="p">)</span></div>
</div>



<span class="c1"># ------------------</span>
<span class="c1"># Geometry operators</span>
<span class="c1"># ------------------</span>


<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="OverlapsLeftLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsLeftLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OverlapsLeftLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The overlaps_left operator returns true if A&#39;s bounding box overlaps or is to the</span>
<span class="sd">    left of B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OverlapsLeftLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsLeftLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;overlaps_left&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="OverlapsRightLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsRightLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OverlapsRightLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;overlaps_right&#39; operator returns true if A&#39;s bounding box overlaps or is to the</span>
<span class="sd">    right of B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OverlapsRightLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsRightLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;overlaps_right&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="OverlapsBelowLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsBelowLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OverlapsBelowLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;overlaps_below&#39; operator returns true if A&#39;s bounding box overlaps or is below</span>
<span class="sd">    B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OverlapsBelowLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsBelowLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;overlaps_below&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="OverlapsAboveLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsAboveLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OverlapsAboveLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;overlaps_above&#39; operator returns true if A&#39;s bounding box overlaps or is above</span>
<span class="sd">    B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OverlapsAboveLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsAboveLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;overlaps_above&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="LeftLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.LeftLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">LeftLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;left&#39; operator returns true if A&#39;s bounding box is strictly to the left</span>
<span class="sd">    of B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="LeftLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.LeftLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="RightLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RightLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RightLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;right&#39; operator returns true if A&#39;s bounding box is strictly to the right</span>
<span class="sd">    of B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="RightLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RightLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="StrictlyBelowLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.StrictlyBelowLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">StrictlyBelowLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;strictly_below&#39; operator returns true if A&#39;s bounding box is strictly below B&#39;s</span>
<span class="sd">    bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="StrictlyBelowLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.StrictlyBelowLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;strictly_below&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="StrictlyAboveLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.StrictlyAboveLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">StrictlyAboveLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;strictly_above&#39; operator returns true if A&#39;s bounding box is strictly above B&#39;s</span>
<span class="sd">    bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="StrictlyAboveLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.StrictlyAboveLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;strictly_above&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="SameAsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.SameAsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SameAsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &quot;~=&quot; operator is the &quot;same as&quot; operator. It tests actual geometric</span>
<span class="sd">    equality of two features. So if A and B are the same feature,</span>
<span class="sd">    vertex-by-vertex, the operator returns true.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SameAsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.SameAsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;same_as&quot;</span></div>
</div>



<span class="n">BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span><span class="p">(</span><span class="n">SameAsLookup</span><span class="p">,</span> <span class="s2">&quot;exact&quot;</span><span class="p">)</span>


<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="BBContainsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.BBContainsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BBContainsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;bbcontains&#39; operator returns true if A&#39;s bounding box completely contains</span>
<span class="sd">    by B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BBContainsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.BBContainsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;bbcontains&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="BBOverlapsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.BBOverlapsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BBOverlapsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;bboverlaps&#39; operator returns true if A&#39;s bounding box overlaps B&#39;s</span>
<span class="sd">    bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BBOverlapsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.BBOverlapsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;bboverlaps&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="ContainedLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.ContainedLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ContainedLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The &#39;contained&#39; operator returns true if A&#39;s bounding box is completely contained</span>
<span class="sd">    by B&#39;s bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ContainedLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.ContainedLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;contained&quot;</span></div>
</div>



<span class="c1"># ------------------</span>
<span class="c1"># Geometry functions</span>
<span class="c1"># ------------------</span>


<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="ContainsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.ContainsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ContainsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="ContainsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.ContainsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;contains&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="ContainsProperlyLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.ContainsProperlyLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ContainsProperlyLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="ContainsProperlyLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.ContainsProperlyLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;contains_properly&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="CoveredByLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.CoveredByLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CoveredByLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="CoveredByLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.CoveredByLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;coveredby&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="CoversLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.CoversLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CoversLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="CoversLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.CoversLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;covers&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="CrossesLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.CrossesLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CrossesLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="CrossesLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.CrossesLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;crosses&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="DisjointLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DisjointLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DisjointLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="DisjointLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DisjointLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;disjoint&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="EqualsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.EqualsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EqualsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="EqualsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.EqualsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;equals&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="IntersectsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.IntersectsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IntersectsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="IntersectsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.IntersectsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;intersects&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="OverlapsLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OverlapsLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="OverlapsLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.OverlapsLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;overlaps&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="RelateLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RelateLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RelateLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="RelateLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RelateLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;relate&quot;</span></div>

<div class="viewcode-block" id="RelateLookup.sql_template">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RelateLookup.sql_template">[docs]</a>
    <span class="n">sql_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(func)s</span><span class="s2">(</span><span class="si">%(lhs)s</span><span class="s2">, </span><span class="si">%(rhs)s</span><span class="s2">, </span><span class="si">%%</span><span class="s2">s)&quot;</span></div>

<div class="viewcode-block" id="RelateLookup.pattern_regex">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RelateLookup.pattern_regex">[docs]</a>
    <span class="n">pattern_regex</span> <span class="o">=</span> <span class="n">_lazy_re_compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[012TF\*]</span><span class="si">{9}</span><span class="s2">$&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="RelateLookup.process_rhs">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.RelateLookup.process_rhs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_rhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="c1"># Check the pattern argument</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">backend_op</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">gis_operators</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">backend_op</span><span class="p">,</span> <span class="s2">&quot;check_relate_argument&quot;</span><span class="p">):</span>
            <span class="n">backend_op</span><span class="o">.</span><span class="n">check_relate_argument</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern_regex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid intersection matrix pattern &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="n">pattern</span><span class="p">)</span>
        <span class="n">sql</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_rhs</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sql</span><span class="p">,</span> <span class="n">params</span> <span class="o">+</span> <span class="p">[</span><span class="n">pattern</span><span class="p">]</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="TouchesLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.TouchesLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TouchesLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="TouchesLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.TouchesLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;touches&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="WithinLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.WithinLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">WithinLookup</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="WithinLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.WithinLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;within&quot;</span></div>
</div>



<div class="viewcode-block" id="DistanceLookupBase">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupBase">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DistanceLookupBase</span><span class="p">(</span><span class="n">GISLookup</span><span class="p">):</span>
<div class="viewcode-block" id="DistanceLookupBase.distance">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupBase.distance">[docs]</a>
    <span class="n">distance</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="DistanceLookupBase.sql_template">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupBase.sql_template">[docs]</a>
    <span class="n">sql_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(func)s</span><span class="s2">(</span><span class="si">%(lhs)s</span><span class="s2">, </span><span class="si">%(rhs)s</span><span class="s2">) </span><span class="si">%(op)s</span><span class="s2"> </span><span class="si">%(value)s</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="DistanceLookupBase.process_rhs_params">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupBase.process_rhs_params">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_rhs_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;2, 3, or 4-element tuple required for &#39;</span><span class="si">%s</span><span class="s2">&#39; lookup.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_name</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;spheroid&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;For 4-element tuples the last argument must be the &#39;spheroid&#39; &quot;</span>
                <span class="s2">&quot;directive.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Check if the second parameter is a band index.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;spheroid&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_band_indices</span><span class="p">()</span></div>


<div class="viewcode-block" id="DistanceLookupBase.process_distance">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupBase.process_distance">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="n">dist_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">compiler</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">dist_param</span><span class="o">.</span><span class="n">resolve_expression</span><span class="p">(</span><span class="n">compiler</span><span class="o">.</span><span class="n">query</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dist_param</span><span class="p">,</span> <span class="s2">&quot;resolve_expression&quot;</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">get_distance</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="o">.</span><span class="n">output_field</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_name</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="DWithinLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DWithinLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DWithinLookup</span><span class="p">(</span><span class="n">DistanceLookupBase</span><span class="p">):</span>
<div class="viewcode-block" id="DWithinLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DWithinLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;dwithin&quot;</span></div>

<div class="viewcode-block" id="DWithinLookup.sql_template">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DWithinLookup.sql_template">[docs]</a>
    <span class="n">sql_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(func)s</span><span class="s2">(</span><span class="si">%(lhs)s</span><span class="s2">, </span><span class="si">%(rhs)s</span><span class="s2">, </span><span class="si">%(value)s</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="DWithinLookup.process_distance">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DWithinLookup.process_distance">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="n">dist_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="n">connection</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">supports_dwithin_distance_expr</span>
            <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dist_param</span><span class="p">,</span> <span class="s2">&quot;resolve_expression&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dist_param</span><span class="p">,</span> <span class="n">Distance</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">NotSupportedError</span><span class="p">(</span>
                <span class="s2">&quot;This backend does not support expressions for specifying &quot;</span>
                <span class="s2">&quot;distance in the dwithin lookup.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_distance</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span></div>


<div class="viewcode-block" id="DWithinLookup.process_rhs">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DWithinLookup.process_rhs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_rhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="n">dist_sql</span><span class="p">,</span> <span class="n">dist_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_distance</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_params</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist_sql</span>
        <span class="n">rhs_sql</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_rhs</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rhs_sql</span><span class="p">,</span> <span class="n">params</span> <span class="o">+</span> <span class="n">dist_params</span></div>
</div>



<div class="viewcode-block" id="DistanceLookupFromFunction">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupFromFunction">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DistanceLookupFromFunction</span><span class="p">(</span><span class="n">DistanceLookupBase</span><span class="p">):</span>
<div class="viewcode-block" id="DistanceLookupFromFunction.as_sql">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLookupFromFunction.as_sql">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">as_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">):</span>
        <span class="n">spheroid</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs_params</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;spheroid&quot;</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="n">distance_expr</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">distance_expr_for_lookup</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">,</span> <span class="n">spheroid</span><span class="o">=</span><span class="n">spheroid</span>
        <span class="p">)</span>
        <span class="n">sql</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">compiler</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">distance_expr</span><span class="o">.</span><span class="n">resolve_expression</span><span class="p">(</span><span class="n">compiler</span><span class="o">.</span><span class="n">query</span><span class="p">))</span>
        <span class="n">dist_sql</span><span class="p">,</span> <span class="n">dist_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_distance</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%(func)s</span><span class="s2"> </span><span class="si">%(op)s</span><span class="s2"> </span><span class="si">%(dist)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;func&quot;</span><span class="p">:</span> <span class="n">sql</span><span class="p">,</span> <span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="p">,</span> <span class="s2">&quot;dist&quot;</span><span class="p">:</span> <span class="n">dist_sql</span><span class="p">},</span>
            <span class="n">params</span> <span class="o">+</span> <span class="n">dist_params</span><span class="p">,</span>
        <span class="p">)</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="DistanceGTLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceGTLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DistanceGTLookup</span><span class="p">(</span><span class="n">DistanceLookupFromFunction</span><span class="p">):</span>
<div class="viewcode-block" id="DistanceGTLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceGTLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;distance_gt&quot;</span></div>

<div class="viewcode-block" id="DistanceGTLookup.op">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceGTLookup.op">[docs]</a>
    <span class="n">op</span> <span class="o">=</span> <span class="s2">&quot;&gt;&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="DistanceGTELookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceGTELookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DistanceGTELookup</span><span class="p">(</span><span class="n">DistanceLookupFromFunction</span><span class="p">):</span>
<div class="viewcode-block" id="DistanceGTELookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceGTELookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;distance_gte&quot;</span></div>

<div class="viewcode-block" id="DistanceGTELookup.op">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceGTELookup.op">[docs]</a>
    <span class="n">op</span> <span class="o">=</span> <span class="s2">&quot;&gt;=&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="DistanceLTLookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLTLookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DistanceLTLookup</span><span class="p">(</span><span class="n">DistanceLookupFromFunction</span><span class="p">):</span>
<div class="viewcode-block" id="DistanceLTLookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLTLookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;distance_lt&quot;</span></div>

<div class="viewcode-block" id="DistanceLTLookup.op">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLTLookup.op">[docs]</a>
    <span class="n">op</span> <span class="o">=</span> <span class="s2">&quot;&lt;&quot;</span></div>
</div>



<span class="nd">@BaseSpatialField</span><span class="o">.</span><span class="n">register_lookup</span>
<div class="viewcode-block" id="DistanceLTELookup">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLTELookup">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DistanceLTELookup</span><span class="p">(</span><span class="n">DistanceLookupFromFunction</span><span class="p">):</span>
<div class="viewcode-block" id="DistanceLTELookup.lookup_name">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLTELookup.lookup_name">[docs]</a>
    <span class="n">lookup_name</span> <span class="o">=</span> <span class="s2">&quot;distance_lte&quot;</span></div>

<div class="viewcode-block" id="DistanceLTELookup.op">
<a class="viewcode-back" href="../../../../../../autoapi/django/contrib/gis/db/models/lookups/index.html#django.contrib.gis.db.models.lookups.DistanceLTELookup.op">[docs]</a>
    <span class="n">op</span> <span class="o">=</span> <span class="s2">&quot;&lt;=&quot;</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>