

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>django.template.defaulttags &mdash; Coursework Two 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Coursework Two
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation_guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage_instructions.html">Usage Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture_overview.html">Architecture Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Coursework Two</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../django.html">django</a></li>
          <li class="breadcrumb-item"><a href="../template.html">django.template</a></li>
      <li class="breadcrumb-item active">django.template.defaulttags</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for django.template.defaulttags</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Default tags used by the template system, available to all templates.&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">cycle</span> <span class="k">as</span> <span class="n">itertools_cycle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">groupby</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">timezone</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.html</span><span class="w"> </span><span class="kn">import</span> <span class="n">conditional_escape</span><span class="p">,</span> <span class="n">escape</span><span class="p">,</span> <span class="n">format_html</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.lorem_ipsum</span><span class="w"> </span><span class="kn">import</span> <span class="n">paragraphs</span><span class="p">,</span> <span class="n">words</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.safestring</span><span class="w"> </span><span class="kn">import</span> <span class="n">mark_safe</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.base</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BLOCK_TAG_END</span><span class="p">,</span>
    <span class="n">BLOCK_TAG_START</span><span class="p">,</span>
    <span class="n">COMMENT_TAG_END</span><span class="p">,</span>
    <span class="n">COMMENT_TAG_START</span><span class="p">,</span>
    <span class="n">FILTER_SEPARATOR</span><span class="p">,</span>
    <span class="n">SINGLE_BRACE_END</span><span class="p">,</span>
    <span class="n">SINGLE_BRACE_START</span><span class="p">,</span>
    <span class="n">VARIABLE_ATTRIBUTE_SEPARATOR</span><span class="p">,</span>
    <span class="n">VARIABLE_TAG_END</span><span class="p">,</span>
    <span class="n">VARIABLE_TAG_START</span><span class="p">,</span>
    <span class="n">Node</span><span class="p">,</span>
    <span class="n">NodeList</span><span class="p">,</span>
    <span class="n">TemplateSyntaxError</span><span class="p">,</span>
    <span class="n">VariableDoesNotExist</span><span class="p">,</span>
    <span class="n">kwarg_re</span><span class="p">,</span>
    <span class="n">render_value_in_context</span><span class="p">,</span>
    <span class="n">token_kwargs</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.context</span><span class="w"> </span><span class="kn">import</span> <span class="n">Context</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.defaultfilters</span><span class="w"> </span><span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.library</span><span class="w"> </span><span class="kn">import</span> <span class="n">Library</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.smartif</span><span class="w"> </span><span class="kn">import</span> <span class="n">IfParser</span><span class="p">,</span> <span class="n">Literal</span>

<div class="viewcode-block" id="register">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.register">[docs]</a>
<span class="n">register</span> <span class="o">=</span> <span class="n">Library</span><span class="p">()</span></div>



<div class="viewcode-block" id="AutoEscapeControlNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.AutoEscapeControlNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AutoEscapeControlNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Implement the actions of the autoescape tag.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span> <span class="o">=</span> <span class="n">setting</span><span class="p">,</span> <span class="n">nodelist</span>

<div class="viewcode-block" id="AutoEscapeControlNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.AutoEscapeControlNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">old_setting</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">autoescape</span>
        <span class="n">context</span><span class="o">.</span><span class="n">autoescape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="n">context</span><span class="o">.</span><span class="n">autoescape</span> <span class="o">=</span> <span class="n">old_setting</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">output</span></div>
</div>



<div class="viewcode-block" id="CommentNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CommentNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CommentNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="CommentNode.child_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CommentNode.child_nodelists">[docs]</a>
    <span class="n">child_nodelists</span> <span class="o">=</span> <span class="p">()</span></div>


<div class="viewcode-block" id="CommentNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CommentNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
</div>



<div class="viewcode-block" id="CsrfTokenNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CsrfTokenNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CsrfTokenNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="CsrfTokenNode.child_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CsrfTokenNode.child_nodelists">[docs]</a>
    <span class="n">child_nodelists</span> <span class="o">=</span> <span class="p">()</span></div>


<div class="viewcode-block" id="CsrfTokenNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CsrfTokenNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;csrf_token&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">csrf_token</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">csrf_token</span> <span class="o">==</span> <span class="s2">&quot;NOTPROVIDED&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">format_html</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">format_html</span><span class="p">(</span>
                    <span class="s1">&#39;&lt;input type=&quot;hidden&quot; name=&quot;csrfmiddlewaretoken&quot; value=&quot;</span><span class="si">{}</span><span class="s1">&quot;&gt;&#39;</span><span class="p">,</span>
                    <span class="n">csrf_token</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># It&#39;s very probable that the token is missing because of</span>
            <span class="c1"># misconfiguration, so we raise a warning</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s2">&quot;A {</span><span class="si">% c</span><span class="s2">srf_token %} was used in a template, but the context &quot;</span>
                    <span class="s2">&quot;did not provide the value.  This is usually caused by not &quot;</span>
                    <span class="s2">&quot;using RequestContext.&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
</div>



<div class="viewcode-block" id="CycleNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CycleNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CycleNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cyclevars</span><span class="p">,</span> <span class="n">variable_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<div class="viewcode-block" id="CycleNode.cyclevars">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CycleNode.cyclevars">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">cyclevars</span> <span class="o">=</span> <span class="n">cyclevars</span></div>

<div class="viewcode-block" id="CycleNode.variable_name">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CycleNode.variable_name">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_name</span> <span class="o">=</span> <span class="n">variable_name</span></div>

<div class="viewcode-block" id="CycleNode.silent">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CycleNode.silent">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">silent</span> <span class="o">=</span> <span class="n">silent</span></div>


<div class="viewcode-block" id="CycleNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CycleNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">render_context</span><span class="p">:</span>
            <span class="c1"># First time the node is rendered in template</span>
            <span class="n">context</span><span class="o">.</span><span class="n">render_context</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">itertools_cycle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cyclevars</span><span class="p">)</span>
        <span class="n">cycle_iter</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">render_context</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">cycle_iter</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_name</span><span class="p">:</span>
            <span class="n">context</span><span class="o">.</span><span class="n">set_upward</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">silent</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">render_value_in_context</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></div>


<div class="viewcode-block" id="CycleNode.reset">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.CycleNode.reset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the cycle iteration back to the beginning.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">context</span><span class="o">.</span><span class="n">render_context</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">itertools_cycle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cyclevars</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="DebugNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.DebugNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DebugNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="DebugNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.DebugNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>

        <span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pformat</span>

        <span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="n">escape</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">val</span><span class="p">))</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">context</span><span class="p">]</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">)))</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="FilterNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.FilterNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">FilterNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_expr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">nodelist</span>

<div class="viewcode-block" id="FilterNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.FilterNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="c1"># Apply filters.</span>
        <span class="k">with</span> <span class="n">context</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">output</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_expr</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="FirstOfNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.FirstOfNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">FirstOfNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">asvar</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<div class="viewcode-block" id="FirstOfNode.vars">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.FirstOfNode.vars">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">variables</span></div>

<div class="viewcode-block" id="FirstOfNode.asvar">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.FirstOfNode.asvar">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span> <span class="o">=</span> <span class="n">asvar</span></div>


<div class="viewcode-block" id="FirstOfNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.FirstOfNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">first</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ignore_failures</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">first</span> <span class="o">=</span> <span class="n">render_value_in_context</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">]</span> <span class="o">=</span> <span class="n">first</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">first</span></div>
</div>



<div class="viewcode-block" id="ForNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ForNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ForNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="ForNode.child_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ForNode.child_nodelists">[docs]</a>
    <span class="n">child_nodelists</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;nodelist_loop&quot;</span><span class="p">,</span> <span class="s2">&quot;nodelist_empty&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">loopvars</span><span class="p">,</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">is_reversed</span><span class="p">,</span> <span class="n">nodelist_loop</span><span class="p">,</span> <span class="n">nodelist_empty</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loopvars</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequence</span> <span class="o">=</span> <span class="n">loopvars</span><span class="p">,</span> <span class="n">sequence</span>
<div class="viewcode-block" id="ForNode.is_reversed">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ForNode.is_reversed">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_reversed</span> <span class="o">=</span> <span class="n">is_reversed</span></div>

<div class="viewcode-block" id="ForNode.nodelist_loop">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ForNode.nodelist_loop">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_loop</span> <span class="o">=</span> <span class="n">nodelist_loop</span></div>

        <span class="k">if</span> <span class="n">nodelist_empty</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_empty</span> <span class="o">=</span> <span class="n">NodeList</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_empty</span> <span class="o">=</span> <span class="n">nodelist_empty</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">reversed_text</span> <span class="o">=</span> <span class="s2">&quot; reversed&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_reversed</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2">: for </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">, tail_len: </span><span class="si">%d%s</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loopvars</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sequence</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodelist_loop</span><span class="p">),</span>
            <span class="n">reversed_text</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="ForNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ForNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;forloop&quot;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">parentloop</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;forloop&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parentloop</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="n">context</span><span class="o">.</span><span class="n">push</span><span class="p">():</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ignore_failures</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="s2">&quot;__len__&quot;</span><span class="p">):</span>
                <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">len_values</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">len_values</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_empty</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="n">nodelist</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_reversed</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="n">num_loopvars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loopvars</span><span class="p">)</span>
            <span class="n">unpack</span> <span class="o">=</span> <span class="n">num_loopvars</span> <span class="o">&gt;</span> <span class="mi">1</span>
            <span class="c1"># Create a forloop value in the context.  We&#39;ll update counters on each</span>
            <span class="c1"># iteration just below.</span>
            <span class="n">loop_dict</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;forloop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;parentloop&quot;</span><span class="p">:</span> <span class="n">parentloop</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
                <span class="c1"># Shortcuts for current loop iteration number.</span>
                <span class="n">loop_dict</span><span class="p">[</span><span class="s2">&quot;counter0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">loop_dict</span><span class="p">[</span><span class="s2">&quot;counter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="c1"># Reverse counter iteration numbers.</span>
                <span class="n">loop_dict</span><span class="p">[</span><span class="s2">&quot;revcounter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">len_values</span> <span class="o">-</span> <span class="n">i</span>
                <span class="n">loop_dict</span><span class="p">[</span><span class="s2">&quot;revcounter0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">len_values</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="c1"># Boolean values designating first and last times through loop.</span>
                <span class="n">loop_dict</span><span class="p">[</span><span class="s2">&quot;first&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="n">loop_dict</span><span class="p">[</span><span class="s2">&quot;last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="n">len_values</span> <span class="o">-</span> <span class="mi">1</span>

                <span class="n">pop_context</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">unpack</span><span class="p">:</span>
                    <span class="c1"># If there are multiple loop variables, unpack the item into</span>
                    <span class="c1"># them.</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">len_item</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>  <span class="c1"># not an iterable</span>
                        <span class="n">len_item</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="c1"># Check loop variable count before unpacking</span>
                    <span class="k">if</span> <span class="n">num_loopvars</span> <span class="o">!=</span> <span class="n">len_item</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="s2">&quot;Need </span><span class="si">{}</span><span class="s2"> values to unpack in for loop; got </span><span class="si">{}</span><span class="s2">. &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">num_loopvars</span><span class="p">,</span> <span class="n">len_item</span>
                            <span class="p">),</span>
                        <span class="p">)</span>
                    <span class="n">unpacked_vars</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loopvars</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>
                    <span class="n">pop_context</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">unpacked_vars</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">loopvars</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span>

                <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_loop</span><span class="p">:</span>
                    <span class="n">nodelist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">render_annotated</span><span class="p">(</span><span class="n">context</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">pop_context</span><span class="p">:</span>
                    <span class="c1"># Pop the loop variables pushed on to the context to avoid</span>
                    <span class="c1"># the context ending up in an inconsistent state when other</span>
                    <span class="c1"># tags (e.g., include and with) push data to context.</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nodelist</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="IfChangedNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfChangedNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfChangedNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="IfChangedNode.child_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfChangedNode.child_nodelists">[docs]</a>
    <span class="n">child_nodelists</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;nodelist_true&quot;</span><span class="p">,</span> <span class="s2">&quot;nodelist_false&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodelist_true</span><span class="p">,</span> <span class="n">nodelist_false</span><span class="p">,</span> <span class="o">*</span><span class="n">varlist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_true</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_false</span> <span class="o">=</span> <span class="n">nodelist_true</span><span class="p">,</span> <span class="n">nodelist_false</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_varlist</span> <span class="o">=</span> <span class="n">varlist</span>

<div class="viewcode-block" id="IfChangedNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfChangedNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="c1"># Init state storage</span>
        <span class="n">state_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_context_stack_frame</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="n">state_frame</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">nodelist_true_output</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_varlist</span><span class="p">:</span>
            <span class="c1"># Consider multiple parameters. This behaves like an OR evaluation</span>
            <span class="c1"># of the multiple variables.</span>
            <span class="n">compare_to</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">var</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ignore_failures</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_varlist</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The &quot;{% ifchanged %}&quot; syntax (without any variables) compares</span>
            <span class="c1"># the rendered output.</span>
            <span class="n">compare_to</span> <span class="o">=</span> <span class="n">nodelist_true_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_true</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">compare_to</span> <span class="o">!=</span> <span class="n">state_frame</span><span class="p">[</span><span class="bp">self</span><span class="p">]:</span>
            <span class="n">state_frame</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">compare_to</span>
            <span class="c1"># render true block if not already rendered</span>
            <span class="k">return</span> <span class="n">nodelist_true_output</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_true</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_false</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist_false</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_get_context_stack_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="c1"># The Context object behaves like a stack where each template tag can</span>
        <span class="c1"># create a new scope. Find the place where to store the state to detect</span>
        <span class="c1"># changes.</span>
        <span class="k">if</span> <span class="s2">&quot;forloop&quot;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
            <span class="c1"># Ifchanged is bound to the local for loop.</span>
            <span class="c1"># When there is a loop-in-loop, the state is bound to the inner loop,</span>
            <span class="c1"># so it resets when the outer loop continues.</span>
            <span class="k">return</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;forloop&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Using ifchanged outside loops. Effectively this is a no-op</span>
            <span class="c1"># because the state is associated with &#39;self&#39;.</span>
            <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">render_context</span></div>



<div class="viewcode-block" id="IfNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditions_nodelists</span><span class="p">):</span>
<div class="viewcode-block" id="IfNode.conditions_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfNode.conditions_nodelists">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditions_nodelists</span> <span class="o">=</span> <span class="n">conditions_nodelists</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">nodelist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditions_nodelists</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">nodelist</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="IfNode.nodelist">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfNode.nodelist">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">nodelist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">NodeList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="IfNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.IfNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">condition</span><span class="p">,</span> <span class="n">nodelist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditions_nodelists</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">condition</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># if / elif clause</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">condition</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">VariableDoesNotExist</span><span class="p">:</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># else clause</span>
                <span class="n">match</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nodelist</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
</div>



<div class="viewcode-block" id="LoremNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.LoremNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">LoremNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">common</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">count</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">common</span>

<div class="viewcode-block" id="LoremNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.LoremNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">))</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">words</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">common</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paras</span> <span class="o">=</span> <span class="n">paragraphs</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">common</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span>
            <span class="n">paras</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&lt;p&gt;</span><span class="si">%s</span><span class="s2">&lt;/p&gt;&quot;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paras</span><span class="p">]</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">paras</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="GroupedResult.list">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.GroupedResult.list">[docs]</a>
<div class="viewcode-block" id="GroupedResult.grouper">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.GroupedResult.grouper">[docs]</a>
<div class="viewcode-block" id="GroupedResult">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.GroupedResult">[docs]</a>
<span class="n">GroupedResult</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;GroupedResult&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;grouper&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">])</span></div>
</div>
</div>



<div class="viewcode-block" id="RegroupNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.RegroupNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RegroupNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">var_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="n">target</span><span class="p">,</span> <span class="n">expression</span>
<div class="viewcode-block" id="RegroupNode.var_name">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.RegroupNode.var_name">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">var_name</span> <span class="o">=</span> <span class="n">var_name</span></div>


<div class="viewcode-block" id="RegroupNode.resolve_expression">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.RegroupNode.resolve_expression">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="c1"># This method is called for each object in self.target. See regroup()</span>
        <span class="c1"># for the reason why we temporarily put the object in the context.</span>
        <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">var_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ignore_failures</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="RegroupNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.RegroupNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ignore_failures</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># target variable wasn&#39;t found in context; fail silently.</span>
            <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">var_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># List of dictionaries in the format:</span>
        <span class="c1"># {&#39;grouper&#39;: &#39;key&#39;, &#39;list&#39;: [list of contents]}.</span>
        <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">var_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">GroupedResult</span><span class="p">(</span><span class="n">grouper</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="nb">list</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span>
                <span class="n">obj_list</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">obj</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_expression</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
</div>



<div class="viewcode-block" id="LoadNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.LoadNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">LoadNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="LoadNode.child_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.LoadNode.child_nodelists">[docs]</a>
    <span class="n">child_nodelists</span> <span class="o">=</span> <span class="p">()</span></div>


<div class="viewcode-block" id="LoadNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.LoadNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
</div>



<div class="viewcode-block" id="NowNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.NowNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NowNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_string</span><span class="p">,</span> <span class="n">asvar</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<div class="viewcode-block" id="NowNode.format_string">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.NowNode.format_string">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">format_string</span> <span class="o">=</span> <span class="n">format_string</span></div>

<div class="viewcode-block" id="NowNode.asvar">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.NowNode.asvar">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span> <span class="o">=</span> <span class="n">asvar</span></div>


<div class="viewcode-block" id="NowNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.NowNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">tzinfo</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">get_current_timezone</span><span class="p">()</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">USE_TZ</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">formatted</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">tzinfo</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_string</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">]</span> <span class="o">=</span> <span class="n">formatted</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">formatted</span></div>
</div>



<div class="viewcode-block" id="ResetCycleNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ResetCycleNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ResetCycleNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
<div class="viewcode-block" id="ResetCycleNode.node">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ResetCycleNode.node">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="n">node</span></div>


<div class="viewcode-block" id="ResetCycleNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ResetCycleNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
</div>



<div class="viewcode-block" id="SpacelessNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.SpacelessNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SpacelessNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">):</span>
<div class="viewcode-block" id="SpacelessNode.nodelist">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.SpacelessNode.nodelist">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span> <span class="o">=</span> <span class="n">nodelist</span></div>


<div class="viewcode-block" id="SpacelessNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.SpacelessNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.html</span><span class="w"> </span><span class="kn">import</span> <span class="n">strip_spaces_between_tags</span>

        <span class="k">return</span> <span class="n">strip_spaces_between_tags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span></div>
</div>



<div class="viewcode-block" id="TemplateTagNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateTagNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TemplateTagNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="TemplateTagNode.mapping">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateTagNode.mapping">[docs]</a>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;openblock&quot;</span><span class="p">:</span> <span class="n">BLOCK_TAG_START</span><span class="p">,</span>
        <span class="s2">&quot;closeblock&quot;</span><span class="p">:</span> <span class="n">BLOCK_TAG_END</span><span class="p">,</span>
        <span class="s2">&quot;openvariable&quot;</span><span class="p">:</span> <span class="n">VARIABLE_TAG_START</span><span class="p">,</span>
        <span class="s2">&quot;closevariable&quot;</span><span class="p">:</span> <span class="n">VARIABLE_TAG_END</span><span class="p">,</span>
        <span class="s2">&quot;openbrace&quot;</span><span class="p">:</span> <span class="n">SINGLE_BRACE_START</span><span class="p">,</span>
        <span class="s2">&quot;closebrace&quot;</span><span class="p">:</span> <span class="n">SINGLE_BRACE_END</span><span class="p">,</span>
        <span class="s2">&quot;opencomment&quot;</span><span class="p">:</span> <span class="n">COMMENT_TAG_START</span><span class="p">,</span>
        <span class="s2">&quot;closecomment&quot;</span><span class="p">:</span> <span class="n">COMMENT_TAG_END</span><span class="p">,</span>
    <span class="p">}</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tagtype</span><span class="p">):</span>
<div class="viewcode-block" id="TemplateTagNode.tagtype">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateTagNode.tagtype">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">tagtype</span> <span class="o">=</span> <span class="n">tagtype</span></div>


<div class="viewcode-block" id="TemplateTagNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateTagNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagtype</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="URLNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">URLNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<div class="viewcode-block" id="URLNode.child_nodelists">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode.child_nodelists">[docs]</a>
    <span class="n">child_nodelists</span> <span class="o">=</span> <span class="p">()</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">asvar</span><span class="p">):</span>
<div class="viewcode-block" id="URLNode.view_name">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode.view_name">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_name</span> <span class="o">=</span> <span class="n">view_name</span></div>

<div class="viewcode-block" id="URLNode.args">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode.args">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span></div>

<div class="viewcode-block" id="URLNode.kwargs">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode.kwargs">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span></div>

<div class="viewcode-block" id="URLNode.asvar">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode.asvar">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span> <span class="o">=</span> <span class="n">asvar</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2"> view_name=&#39;</span><span class="si">%s</span><span class="s2">&#39; args=</span><span class="si">%s</span><span class="s2"> kwargs=</span><span class="si">%s</span><span class="s2"> as=</span><span class="si">%s</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view_name</span><span class="p">,</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">),</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">),</span>
        <span class="p">)</span>

<div class="viewcode-block" id="URLNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.URLNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">django.urls</span><span class="w"> </span><span class="kn">import</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span>

        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="n">view_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view_name</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">current_app</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">current_app</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">current_app</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">resolver_match</span><span class="o">.</span><span class="n">namespace</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">current_app</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Try to look up the URL. If it fails, raise NoReverseMatch unless the</span>
        <span class="c1"># {% url ... as var %} construct is used, in which case return nothing.</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">view_name</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="n">current_app</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">conditional_escape</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">url</span></div>
</div>



<div class="viewcode-block" id="VerbatimNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.VerbatimNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">VerbatimNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
<div class="viewcode-block" id="VerbatimNode.content">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.VerbatimNode.content">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span></div>


<div class="viewcode-block" id="VerbatimNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.VerbatimNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span></div>
</div>



<div class="viewcode-block" id="WidthRatioNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WidthRatioNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">WidthRatioNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val_expr</span><span class="p">,</span> <span class="n">max_expr</span><span class="p">,</span> <span class="n">max_width</span><span class="p">,</span> <span class="n">asvar</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<div class="viewcode-block" id="WidthRatioNode.val_expr">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WidthRatioNode.val_expr">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">val_expr</span> <span class="o">=</span> <span class="n">val_expr</span></div>

<div class="viewcode-block" id="WidthRatioNode.max_expr">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WidthRatioNode.max_expr">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_expr</span> <span class="o">=</span> <span class="n">max_expr</span></div>

<div class="viewcode-block" id="WidthRatioNode.max_width">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WidthRatioNode.max_width">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">max_width</span></div>

<div class="viewcode-block" id="WidthRatioNode.asvar">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WidthRatioNode.asvar">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span> <span class="o">=</span> <span class="n">asvar</span></div>


<div class="viewcode-block" id="WidthRatioNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WidthRatioNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val_expr</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_expr</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_width</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">VariableDoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;widthratio final argument must be a number&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">max_value</span><span class="p">)</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span> <span class="o">/</span> <span class="n">max_value</span><span class="p">)</span> <span class="o">*</span> <span class="n">max_width</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">ratio</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">OverflowError</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">asvar</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span></div>
</div>



<div class="viewcode-block" id="WithNode">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WithNode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">WithNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">,</span> <span class="n">extra_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<div class="viewcode-block" id="WithNode.nodelist">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WithNode.nodelist">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span> <span class="o">=</span> <span class="n">nodelist</span></div>

        <span class="c1"># var and name are legacy attributes, being left in case they are used</span>
        <span class="c1"># by third-party subclasses of this Node.</span>
<div class="viewcode-block" id="WithNode.extra_context">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WithNode.extra_context">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_context</span> <span class="o">=</span> <span class="n">extra_context</span> <span class="ow">or</span> <span class="p">{}</span></div>

        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extra_context</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>

<div class="viewcode-block" id="WithNode.render">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.WithNode.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extra_context</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">with</span> <span class="n">context</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="o">**</span><span class="n">values</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodelist</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></div>
</div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="autoescape">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.autoescape">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">autoescape</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Force autoescape behavior for this block.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># token.split_contents() isn&#39;t useful here because this tag doesn&#39;t accept</span>
    <span class="c1"># variable as arguments.</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;autoescape&#39; tag requires exactly one argument.&quot;</span><span class="p">)</span>
    <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">arg</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;autoescape&#39; argument should be &#39;on&#39; or &#39;off&#39;&quot;</span><span class="p">)</span>
    <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endautoescape&quot;</span><span class="p">,))</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">AutoEscapeControlNode</span><span class="p">((</span><span class="n">arg</span> <span class="o">==</span> <span class="s2">&quot;on&quot;</span><span class="p">),</span> <span class="n">nodelist</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="comment">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.comment">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">comment</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ignore everything between ``{% comment %}`` and ``{% endcomment %}``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">skip_past</span><span class="p">(</span><span class="s2">&quot;endcomment&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">CommentNode</span><span class="p">()</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="cycle">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.cycle">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">cycle</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cycle among the given strings each time this tag is encountered.</span>

<span class="sd">    Within a loop, cycles among the given strings each time through</span>
<span class="sd">    the loop::</span>

<span class="sd">        {% for o in some_list %}</span>
<span class="sd">            &lt;tr class=&quot;{% cycle &#39;row1&#39; &#39;row2&#39; %}&quot;&gt;</span>
<span class="sd">                ...</span>
<span class="sd">            &lt;/tr&gt;</span>
<span class="sd">        {% endfor %}</span>

<span class="sd">    Outside of a loop, give the values a unique name the first time you call</span>
<span class="sd">    it, then use that name each successive time through::</span>

<span class="sd">            &lt;tr class=&quot;{% cycle &#39;row1&#39; &#39;row2&#39; &#39;row3&#39; as rowcolors %}&quot;&gt;...&lt;/tr&gt;</span>
<span class="sd">            &lt;tr class=&quot;{% cycle rowcolors %}&quot;&gt;...&lt;/tr&gt;</span>
<span class="sd">            &lt;tr class=&quot;{% cycle rowcolors %}&quot;&gt;...&lt;/tr&gt;</span>

<span class="sd">    You can use any number of values, separated by spaces. Commas can also</span>
<span class="sd">    be used to separate values; if a comma is used, the cycle values are</span>
<span class="sd">    interpreted as literal strings.</span>

<span class="sd">    The optional flag &quot;silent&quot; can be used to prevent the cycle declaration</span>
<span class="sd">    from returning any value::</span>

<span class="sd">        {% for o in some_list %}</span>
<span class="sd">            {% cycle &#39;row1&#39; &#39;row2&#39; as rowcolors silent %}</span>
<span class="sd">            &lt;tr class=&quot;{{ rowcolors }}&quot;&gt;{% include &quot;subtemplate.html &quot; %}&lt;/tr&gt;</span>
<span class="sd">        {% endfor %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Note: This returns the exact same node on each {% cycle name %} call;</span>
    <span class="c1"># that is, the node object returned from {% cycle a b c as name %} and the</span>
    <span class="c1"># one returned from {% cycle name %} are the exact same object. This</span>
    <span class="c1"># shouldn&#39;t cause problems (heh), but if it does, now you know.</span>
    <span class="c1">#</span>
    <span class="c1"># Ugly hack warning: This stuffs the named template dict into parser so</span>
    <span class="c1"># that names are only unique within each template (as opposed to using</span>
    <span class="c1"># a global variable, which would make cycle names have to be unique across</span>
    <span class="c1"># *all* templates.</span>
    <span class="c1">#</span>
    <span class="c1"># It keeps the last node in the parser to be able to reset it with</span>
    <span class="c1"># {% resetcycle %}.</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;cycle&#39; tag requires at least two arguments&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="c1"># {% cycle foo %} case.</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s2">&quot;_named_cycle_nodes&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;No named cycles in template. &#39;</span><span class="si">%s</span><span class="s2">&#39; is not defined&quot;</span> <span class="o">%</span> <span class="n">name</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">_named_cycle_nodes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;Named cycle &#39;</span><span class="si">%s</span><span class="s2">&#39; does not exist&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">_named_cycle_nodes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="n">as_form</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
        <span class="c1"># {% cycle ... as foo [silent] %} case.</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;silent&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
                    <span class="s2">&quot;Only &#39;silent&#39; flag is allowed after cycle&#39;s name, not &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span>
                    <span class="o">%</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="n">as_form</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
            <span class="n">as_form</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">as_form</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">CycleNode</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s2">&quot;_named_cycle_nodes&quot;</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">_named_cycle_nodes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">_named_cycle_nodes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">CycleNode</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">_last_cycle_node</span> <span class="o">=</span> <span class="n">node</span>
    <span class="k">return</span> <span class="n">node</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="csrf_token">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.csrf_token">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">csrf_token</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">CsrfTokenNode</span><span class="p">()</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="debug">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.debug">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">debug</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Output a whole load of debugging information, including the current</span>
<span class="sd">    context and imported modules.</span>

<span class="sd">    Sample usage::</span>

<span class="sd">        &lt;pre&gt;</span>
<span class="sd">            {% debug %}</span>
<span class="sd">        &lt;/pre&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">DebugNode</span><span class="p">()</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="s2">&quot;filter&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="do_filter">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.do_filter">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">do_filter</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Filter the contents of the block through variable filters.</span>

<span class="sd">    Filters can also be piped through each other, and they can have</span>
<span class="sd">    arguments -- just like in variable syntax.</span>

<span class="sd">    Sample usage::</span>

<span class="sd">        {% filter force_escape|lower %}</span>
<span class="sd">            This text will be HTML-escaped, and will appear in lowercase.</span>
<span class="sd">        {% endfilter %}</span>

<span class="sd">    Note that the ``escape`` and ``safe`` filters are not acceptable arguments.</span>
<span class="sd">    Instead, use the ``autoescape`` tag to manage autoescaping for blocks of</span>
<span class="sd">    template code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># token.split_contents() isn&#39;t useful here because this tag doesn&#39;t accept</span>
    <span class="c1"># variable as arguments.</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">filter_expr</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="s2">&quot;var|</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rest</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">func</span><span class="p">,</span> <span class="n">unused</span> <span class="ow">in</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">filters</span><span class="p">:</span>
        <span class="n">filter_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s2">&quot;_filter_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filter_name</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;escape&quot;</span><span class="p">,</span> <span class="s2">&quot;safe&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
                <span class="s1">&#39;&quot;filter </span><span class="si">%s</span><span class="s1">&quot; is not permitted.  Use the &quot;autoescape&quot; tag instead.&#39;</span>
                <span class="o">%</span> <span class="n">filter_name</span>
            <span class="p">)</span>
    <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endfilter&quot;</span><span class="p">,))</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">FilterNode</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="firstof">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.firstof">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">firstof</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Output the first variable passed that is not False.</span>

<span class="sd">    Output nothing if all the passed variables are False.</span>

<span class="sd">    Sample usage::</span>

<span class="sd">        {% firstof var1 var2 var3 as myvar %}</span>

<span class="sd">    This is equivalent to::</span>

<span class="sd">        {% if var1 %}</span>
<span class="sd">            {{ var1 }}</span>
<span class="sd">        {% elif var2 %}</span>
<span class="sd">            {{ var2 }}</span>
<span class="sd">        {% elif var3 %}</span>
<span class="sd">            {{ var3 }}</span>
<span class="sd">        {% endif %}</span>

<span class="sd">    but much cleaner!</span>

<span class="sd">    You can also use a literal string as a fallback value in case all</span>
<span class="sd">    passed variables are False::</span>

<span class="sd">        {% firstof var1 var2 var3 &quot;fallback value&quot; %}</span>

<span class="sd">    If you want to disable auto-escaping of variables you can use::</span>

<span class="sd">        {% autoescape off %}</span>
<span class="sd">            {% firstof var1 var2 var3 &quot;&lt;strong&gt;fallback value&lt;/strong&gt;&quot; %}</span>
<span class="sd">        {% autoescape %}</span>

<span class="sd">    Or if only some variables should be escaped, you can use::</span>

<span class="sd">        {% firstof var1 var2|safe var3 &quot;&lt;strong&gt;fallback value&lt;/strong&gt;&quot;|safe %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">asvar</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">bits</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;firstof&#39; statement requires at least one argument&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
        <span class="n">asvar</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">FirstOfNode</span><span class="p">([</span><span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span> <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">],</span> <span class="n">asvar</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="s2">&quot;for&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="do_for">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.do_for">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">do_for</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loop over each item in an array.</span>

<span class="sd">    For example, to display a list of athletes given ``athlete_list``::</span>

<span class="sd">        &lt;ul&gt;</span>
<span class="sd">        {% for athlete in athlete_list %}</span>
<span class="sd">            &lt;li&gt;{{ athlete.name }}&lt;/li&gt;</span>
<span class="sd">        {% endfor %}</span>
<span class="sd">        &lt;/ul&gt;</span>

<span class="sd">    You can loop over a list in reverse by using</span>
<span class="sd">    ``{% for obj in list reversed %}``.</span>

<span class="sd">    You can also unpack multiple values from a two-dimensional array::</span>

<span class="sd">        {% for key,value in dict.items %}</span>
<span class="sd">            {{ key }}: {{ value }}</span>
<span class="sd">        {% endfor %}</span>

<span class="sd">    The ``for`` tag can take an optional ``{% empty %}`` clause that will</span>
<span class="sd">    be displayed if the given array is empty or could not be found::</span>

<span class="sd">        &lt;ul&gt;</span>
<span class="sd">          {% for athlete in athlete_list %}</span>
<span class="sd">            &lt;li&gt;{{ athlete.name }}&lt;/li&gt;</span>
<span class="sd">          {% empty %}</span>
<span class="sd">            &lt;li&gt;Sorry, no athletes in this list.&lt;/li&gt;</span>
<span class="sd">          {% endfor %}</span>
<span class="sd">        &lt;ul&gt;</span>

<span class="sd">    The above is equivalent to -- but shorter, cleaner, and possibly faster</span>
<span class="sd">    than -- the following::</span>

<span class="sd">        &lt;ul&gt;</span>
<span class="sd">          {% if athlete_list %}</span>
<span class="sd">            {% for athlete in athlete_list %}</span>
<span class="sd">              &lt;li&gt;{{ athlete.name }}&lt;/li&gt;</span>
<span class="sd">            {% endfor %}</span>
<span class="sd">          {% else %}</span>
<span class="sd">            &lt;li&gt;Sorry, no athletes in this list.&lt;/li&gt;</span>
<span class="sd">          {% endif %}</span>
<span class="sd">        &lt;/ul&gt;</span>

<span class="sd">    The for loop sets a number of variables available within the loop:</span>

<span class="sd">        ==========================  ================================================</span>
<span class="sd">        Variable                    Description</span>
<span class="sd">        ==========================  ================================================</span>
<span class="sd">        ``forloop.counter``         The current iteration of the loop (1-indexed)</span>
<span class="sd">        ``forloop.counter0``        The current iteration of the loop (0-indexed)</span>
<span class="sd">        ``forloop.revcounter``      The number of iterations from the end of the</span>
<span class="sd">                                    loop (1-indexed)</span>
<span class="sd">        ``forloop.revcounter0``     The number of iterations from the end of the</span>
<span class="sd">                                    loop (0-indexed)</span>
<span class="sd">        ``forloop.first``           True if this is the first time through the loop</span>
<span class="sd">        ``forloop.last``            True if this is the last time through the loop</span>
<span class="sd">        ``forloop.parentloop``      For nested loops, this is the loop &quot;above&quot; the</span>
<span class="sd">                                    current one</span>
<span class="sd">        ==========================  ================================================</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;for&#39; statements should have at least four words: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span>
        <span class="p">)</span>

    <span class="n">is_reversed</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;reversed&quot;</span>
    <span class="n">in_index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span> <span class="k">if</span> <span class="n">is_reversed</span> <span class="k">else</span> <span class="o">-</span><span class="mi">2</span>
    <span class="k">if</span> <span class="n">bits</span><span class="p">[</span><span class="n">in_index</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;for&#39; statements should use the format&quot;</span>
            <span class="s2">&quot; &#39;for x in y&#39;: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span>
        <span class="p">)</span>

    <span class="n">invalid_chars</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="n">FILTER_SEPARATOR</span><span class="p">))</span>
    <span class="n">loopvars</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot; *, *&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">in_index</span><span class="p">]))</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">loopvars</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">invalid_chars</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;&#39;for&#39; tag received an invalid argument: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span>
            <span class="p">)</span>

    <span class="n">sequence</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="n">in_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">nodelist_loop</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="s2">&quot;empty&quot;</span><span class="p">,</span>
            <span class="s2">&quot;endfor&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">next_token</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span> <span class="o">==</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
        <span class="n">nodelist_empty</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endfor&quot;</span><span class="p">,))</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nodelist_empty</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">ForNode</span><span class="p">(</span><span class="n">loopvars</span><span class="p">,</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">is_reversed</span><span class="p">,</span> <span class="n">nodelist_loop</span><span class="p">,</span> <span class="n">nodelist_empty</span><span class="p">)</span></div>



<div class="viewcode-block" id="TemplateLiteral">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateLiteral">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TemplateLiteral</span><span class="p">(</span><span class="n">Literal</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
<div class="viewcode-block" id="TemplateLiteral.value">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateLiteral.value">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="TemplateLiteral.text">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateLiteral.text">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>  <span class="c1"># for better error messages</span></div>


<div class="viewcode-block" id="TemplateLiteral.display">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateLiteral.display">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span></div>


<div class="viewcode-block" id="TemplateLiteral.eval">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateLiteral.eval">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ignore_failures</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TemplateIfParser">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateIfParser">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TemplateIfParser</span><span class="p">(</span><span class="n">IfParser</span><span class="p">):</span>
<div class="viewcode-block" id="TemplateIfParser.error_class">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateIfParser.error_class">[docs]</a>
    <span class="n">error_class</span> <span class="o">=</span> <span class="n">TemplateSyntaxError</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<div class="viewcode-block" id="TemplateIfParser.template_parser">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateIfParser.template_parser">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_parser</span> <span class="o">=</span> <span class="n">parser</span></div>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="TemplateIfParser.create_var">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.TemplateIfParser.create_var">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TemplateLiteral</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template_parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span></div>
</div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="s2">&quot;if&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="do_if">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.do_if">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">do_if</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluate a variable, and if that variable is &quot;true&quot; (i.e., exists, is not</span>
<span class="sd">    empty, and is not a false boolean value), output the contents of the block:</span>

<span class="sd">    ::</span>

<span class="sd">        {% if athlete_list %}</span>
<span class="sd">            Number of athletes: {{ athlete_list|count }}</span>
<span class="sd">        {% elif athlete_in_locker_room_list %}</span>
<span class="sd">            Athletes should be out of the locker room soon!</span>
<span class="sd">        {% else %}</span>
<span class="sd">            No athletes.</span>
<span class="sd">        {% endif %}</span>

<span class="sd">    In the above, if ``athlete_list`` is not empty, the number of athletes will</span>
<span class="sd">    be displayed by the ``{{ athlete_list|count }}`` variable.</span>

<span class="sd">    The ``if`` tag may take one or several `` {% elif %}`` clauses, as well as</span>
<span class="sd">    an ``{% else %}`` clause that will be displayed if all previous conditions</span>
<span class="sd">    fail. These clauses are optional.</span>

<span class="sd">    ``if`` tags may use ``or``, ``and`` or ``not`` to test a number of</span>
<span class="sd">    variables or to negate a given variable::</span>

<span class="sd">        {% if not athlete_list %}</span>
<span class="sd">            There are no athletes.</span>
<span class="sd">        {% endif %}</span>

<span class="sd">        {% if athlete_list or coach_list %}</span>
<span class="sd">            There are some athletes or some coaches.</span>
<span class="sd">        {% endif %}</span>

<span class="sd">        {% if athlete_list and coach_list %}</span>
<span class="sd">            Both athletes and coaches are available.</span>
<span class="sd">        {% endif %}</span>

<span class="sd">        {% if not athlete_list or coach_list %}</span>
<span class="sd">            There are no athletes, or there are some coaches.</span>
<span class="sd">        {% endif %}</span>

<span class="sd">        {% if athlete_list and not coach_list %}</span>
<span class="sd">            There are some athletes and absolutely no coaches.</span>
<span class="sd">        {% endif %}</span>

<span class="sd">    Comparison operators are also available, and the use of filters is also</span>
<span class="sd">    allowed, for example::</span>

<span class="sd">        {% if articles|length &gt;= 5 %}...{% endif %}</span>

<span class="sd">    Arguments and operators _must_ have a space between them, so</span>
<span class="sd">    ``{% if 1&gt;2 %}`` is not a valid if tag.</span>

<span class="sd">    All supported operators are: ``or``, ``and``, ``in``, ``not in``</span>
<span class="sd">    ``==``, ``!=``, ``&gt;``, ``&gt;=``, ``&lt;`` and ``&lt;=``.</span>

<span class="sd">    Operator precedence follows Python.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># {% if ... %}</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">condition</span> <span class="o">=</span> <span class="n">TemplateIfParser</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">bits</span><span class="p">)</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
    <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;elif&quot;</span><span class="p">,</span> <span class="s2">&quot;else&quot;</span><span class="p">,</span> <span class="s2">&quot;endif&quot;</span><span class="p">))</span>
    <span class="n">conditions_nodelists</span> <span class="o">=</span> <span class="p">[(</span><span class="n">condition</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">)]</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">next_token</span><span class="p">()</span>

    <span class="c1"># {% elif ... %} (repeatable)</span>
    <span class="k">while</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;elif&quot;</span><span class="p">):</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">condition</span> <span class="o">=</span> <span class="n">TemplateIfParser</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">bits</span><span class="p">)</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
        <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;elif&quot;</span><span class="p">,</span> <span class="s2">&quot;else&quot;</span><span class="p">,</span> <span class="s2">&quot;endif&quot;</span><span class="p">))</span>
        <span class="n">conditions_nodelists</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">condition</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">))</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">next_token</span><span class="p">()</span>

    <span class="c1"># {% else %} (optional)</span>
    <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span>
        <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endif&quot;</span><span class="p">,))</span>
        <span class="n">conditions_nodelists</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">))</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">next_token</span><span class="p">()</span>

    <span class="c1"># {% endif %}</span>
    <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span> <span class="o">!=</span> <span class="s2">&quot;endif&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s1">&#39;Malformed template tag at line </span><span class="si">{}</span><span class="s1">: &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">token</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">IfNode</span><span class="p">(</span><span class="n">conditions_nodelists</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="ifchanged">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.ifchanged">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">ifchanged</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a value has changed from the last iteration of a loop.</span>

<span class="sd">    The ``{% ifchanged %}`` block tag is used within a loop. It has two</span>
<span class="sd">    possible uses.</span>

<span class="sd">    1. Check its own rendered contents against its previous state and only</span>
<span class="sd">       displays the content if it has changed. For example, this displays a</span>
<span class="sd">       list of days, only displaying the month if it changes::</span>

<span class="sd">            &lt;h1&gt;Archive for {{ year }}&lt;/h1&gt;</span>

<span class="sd">            {% for date in days %}</span>
<span class="sd">                {% ifchanged %}&lt;h3&gt;{{ date|date:&quot;F&quot; }}&lt;/h3&gt;{% endifchanged %}</span>
<span class="sd">                &lt;a href=&quot;{{ date|date:&quot;M/d&quot;|lower }}/&quot;&gt;{{ date|date:&quot;j&quot; }}&lt;/a&gt;</span>
<span class="sd">            {% endfor %}</span>

<span class="sd">    2. If given one or more variables, check whether any variable has changed.</span>
<span class="sd">       For example, the following shows the date every time it changes, while</span>
<span class="sd">       showing the hour if either the hour or the date has changed::</span>

<span class="sd">            {% for date in days %}</span>
<span class="sd">                {% ifchanged date.date %} {{ date.date }} {% endifchanged %}</span>
<span class="sd">                {% ifchanged date.hour date.date %}</span>
<span class="sd">                    {{ date.hour }}</span>
<span class="sd">                {% endifchanged %}</span>
<span class="sd">            {% endfor %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="n">nodelist_true</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;else&quot;</span><span class="p">,</span> <span class="s2">&quot;endifchanged&quot;</span><span class="p">))</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">next_token</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span>
        <span class="n">nodelist_false</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endifchanged&quot;</span><span class="p">,))</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nodelist_false</span> <span class="o">=</span> <span class="n">NodeList</span><span class="p">()</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span> <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
    <span class="k">return</span> <span class="n">IfChangedNode</span><span class="p">(</span><span class="n">nodelist_true</span><span class="p">,</span> <span class="n">nodelist_false</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">)</span></div>



<div class="viewcode-block" id="find_library">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.find_library">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">find_library</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">libraries</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not a registered tag library. Must be one of:</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="o">%</span> <span class="p">(</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">libraries</span><span class="p">)),</span>
            <span class="p">),</span>
        <span class="p">)</span></div>



<div class="viewcode-block" id="load_from_library">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.load_from_library">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">load_from_library</span><span class="p">(</span><span class="n">library</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a subset of tags and filters from a library.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subset</span> <span class="o">=</span> <span class="n">Library</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">subset</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">filters</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">subset</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">found</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not a valid tag or filter in tag library &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span>
                <span class="o">%</span> <span class="p">(</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">label</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">subset</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="load">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.load">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a custom template tag library into the parser.</span>

<span class="sd">    For example, to load the template tags in</span>
<span class="sd">    ``django/templatetags/news/photos.py``::</span>

<span class="sd">        {% load news.photos %}</span>

<span class="sd">    Can also be used to load an individual tag/filter from</span>
<span class="sd">    a library::</span>

<span class="sd">        {% load byline from news %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># token.split_contents() isn&#39;t useful here because this tag doesn&#39;t accept</span>
    <span class="c1"># variable as arguments.</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;from&quot;</span><span class="p">:</span>
        <span class="c1"># from syntax is used; load individual tags from the library</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">lib</span> <span class="o">=</span> <span class="n">find_library</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">subset</span> <span class="o">=</span> <span class="n">load_from_library</span><span class="p">(</span><span class="n">lib</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_library</span><span class="p">(</span><span class="n">subset</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># one or more libraries are specified; load and add them to the parser</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">lib</span> <span class="o">=</span> <span class="n">find_library</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_library</span><span class="p">(</span><span class="n">lib</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">LoadNode</span><span class="p">()</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="lorem">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.lorem">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">lorem</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create random Latin text useful for providing test data in templates.</span>

<span class="sd">    Usage format::</span>

<span class="sd">        {% lorem [count] [method] [random] %}</span>

<span class="sd">    ``count`` is a number (or variable) containing the number of paragraphs or</span>
<span class="sd">    words to generate (default is 1).</span>

<span class="sd">    ``method`` is either ``w`` for words, ``p`` for HTML paragraphs, ``b`` for</span>
<span class="sd">    plain-text paragraph blocks (default is ``b``).</span>

<span class="sd">    ``random`` is the word ``random``, which if given, does not use the common</span>
<span class="sd">    paragraph (starting &quot;Lorem ipsum dolor sit amet, consectetuer...&quot;).</span>

<span class="sd">    Examples:</span>

<span class="sd">    * ``{% lorem %}`` outputs the common &quot;lorem ipsum&quot; paragraph</span>
<span class="sd">    * ``{% lorem 3 p %}`` outputs the common &quot;lorem ipsum&quot; paragraph</span>
<span class="sd">      and two random paragraphs each wrapped in HTML ``&lt;p&gt;`` tags</span>
<span class="sd">    * ``{% lorem 2 w random %}`` outputs two random latin words</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">())</span>
    <span class="n">tagname</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># Random bit</span>
    <span class="n">common</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;random&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">common</span><span class="p">:</span>
        <span class="n">bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="c1"># Method bit</span>
    <span class="k">if</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">):</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="c1"># Count bit</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;Incorrect format for </span><span class="si">%r</span><span class="s2"> tag&quot;</span> <span class="o">%</span> <span class="n">tagname</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">LoremNode</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">common</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="now">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.now">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">now</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Display the date, formatted according to the given string.</span>

<span class="sd">    Use the same format as PHP&#39;s ``date()`` function; see https://php.net/date</span>
<span class="sd">    for all the possible values.</span>

<span class="sd">    Sample usage::</span>

<span class="sd">        It is {% now &quot;jS F Y H:i&quot; %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="n">asvar</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
        <span class="n">asvar</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;now&#39; statement takes one argument&quot;</span><span class="p">)</span>
    <span class="n">format_string</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">NowNode</span><span class="p">(</span><span class="n">format_string</span><span class="p">,</span> <span class="n">asvar</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="regroup">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.regroup">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">regroup</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Regroup a list of alike objects by a common attribute.</span>

<span class="sd">    This complex tag is best illustrated by use of an example: say that</span>
<span class="sd">    ``musicians`` is a list of ``Musician`` objects that have ``name`` and</span>
<span class="sd">    ``instrument`` attributes, and you&#39;d like to display a list that</span>
<span class="sd">    looks like:</span>

<span class="sd">        * Guitar:</span>
<span class="sd">            * Django Reinhardt</span>
<span class="sd">            * Emily Remler</span>
<span class="sd">        * Piano:</span>
<span class="sd">            * Lovie Austin</span>
<span class="sd">            * Bud Powell</span>
<span class="sd">        * Trumpet:</span>
<span class="sd">            * Duke Ellington</span>

<span class="sd">    The following snippet of template code would accomplish this dubious task::</span>

<span class="sd">        {% regroup musicians by instrument as grouped %}</span>
<span class="sd">        &lt;ul&gt;</span>
<span class="sd">        {% for group in grouped %}</span>
<span class="sd">            &lt;li&gt;{{ group.grouper }}</span>
<span class="sd">            &lt;ul&gt;</span>
<span class="sd">                {% for musician in group.list %}</span>
<span class="sd">                &lt;li&gt;{{ musician.name }}&lt;/li&gt;</span>
<span class="sd">                {% endfor %}</span>
<span class="sd">            &lt;/ul&gt;</span>
<span class="sd">        {% endfor %}</span>
<span class="sd">        &lt;/ul&gt;</span>

<span class="sd">    As you can see, ``{% regroup %}`` populates a variable with a list of</span>
<span class="sd">    objects with ``grouper`` and ``list`` attributes. ``grouper`` contains the</span>
<span class="sd">    item that was grouped by; ``list`` contains the list of objects that share</span>
<span class="sd">    that ``grouper``. In this case, ``grouper`` would be ``Guitar``, ``Piano``</span>
<span class="sd">    and ``Trumpet``, and ``list`` is the list of musicians who play this</span>
<span class="sd">    instrument.</span>

<span class="sd">    Note that ``{% regroup %}`` does not work when the list to be grouped is not</span>
<span class="sd">    sorted by the key you are grouping by! This means that if your list of</span>
<span class="sd">    musicians was not sorted by instrument, you&#39;d need to make sure it is sorted</span>
<span class="sd">    before using it, i.e.::</span>

<span class="sd">        {% regroup musicians|dictsort:&quot;instrument&quot; by instrument as grouped %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;regroup&#39; tag takes five arguments&quot;</span><span class="p">)</span>
    <span class="n">target</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;by&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;second argument to &#39;regroup&#39; tag must be &#39;by&#39;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bits</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;next-to-last argument to &#39;regroup&#39; tag must be &#39;as&#39;&quot;</span><span class="p">)</span>
    <span class="n">var_name</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="c1"># RegroupNode will take each item in &#39;target&#39;, put it in the context under</span>
    <span class="c1"># &#39;var_name&#39;, evaluate &#39;var_name&#39;.&#39;expression&#39; in the current context, and</span>
    <span class="c1"># group by the resulting value. After all items are processed, it will</span>
    <span class="c1"># save the final result in the context under &#39;var_name&#39;, thus clearing the</span>
    <span class="c1"># temporary values. This hack is necessary because the template engine</span>
    <span class="c1"># doesn&#39;t provide a context-aware equivalent of Python&#39;s getattr.</span>
    <span class="n">expression</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span>
        <span class="n">var_name</span> <span class="o">+</span> <span class="n">VARIABLE_ATTRIBUTE_SEPARATOR</span> <span class="o">+</span> <span class="n">bits</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">RegroupNode</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">var_name</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="resetcycle">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.resetcycle">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">resetcycle</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset a cycle tag.</span>

<span class="sd">    If an argument is given, reset the last rendered cycle tag whose name</span>
<span class="sd">    matches the argument, else reset the last rendered cycle tag (named or</span>
<span class="sd">    unnamed).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> tag accepts at most one argument.&quot;</span> <span class="o">%</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ResetCycleNode</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">_named_cycle_nodes</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;Named cycle &#39;</span><span class="si">%s</span><span class="s2">&#39; does not exist.&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ResetCycleNode</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">_last_cycle_node</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;No cycles in template.&quot;</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="spaceless">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.spaceless">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">spaceless</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove whitespace between HTML tags, including tab and newline characters.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        {% spaceless %}</span>
<span class="sd">            &lt;p&gt;</span>
<span class="sd">                &lt;a href=&quot;foo/&quot;&gt;Foo&lt;/a&gt;</span>
<span class="sd">            &lt;/p&gt;</span>
<span class="sd">        {% endspaceless %}</span>

<span class="sd">    This example returns this HTML::</span>

<span class="sd">        &lt;p&gt;&lt;a href=&quot;foo/&quot;&gt;Foo&lt;/a&gt;&lt;/p&gt;</span>

<span class="sd">    Only space between *tags* is normalized -- not space between tags and text.</span>
<span class="sd">    In this example, the space around ``Hello`` isn&#39;t stripped::</span>

<span class="sd">        {% spaceless %}</span>
<span class="sd">            &lt;strong&gt;</span>
<span class="sd">                Hello</span>
<span class="sd">            &lt;/strong&gt;</span>
<span class="sd">        {% endspaceless %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endspaceless&quot;</span><span class="p">,))</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">SpacelessNode</span><span class="p">(</span><span class="n">nodelist</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="templatetag">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.templatetag">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">templatetag</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Output one of the bits used to compose template tags.</span>

<span class="sd">    Since the template system has no concept of &quot;escaping&quot;, to display one of</span>
<span class="sd">    the bits used in template tags, you must use the ``{% templatetag %}`` tag.</span>

<span class="sd">    The argument tells which template bit to output:</span>

<span class="sd">        ==================  =======</span>
<span class="sd">        Argument            Outputs</span>
<span class="sd">        ==================  =======</span>
<span class="sd">        ``openblock``       ``{%``</span>
<span class="sd">        ``closeblock``      ``%}``</span>
<span class="sd">        ``openvariable``    ``{{``</span>
<span class="sd">        ``closevariable``   ``}}``</span>
<span class="sd">        ``openbrace``       ``{``</span>
<span class="sd">        ``closebrace``      ``}``</span>
<span class="sd">        ``opencomment``     ``{#``</span>
<span class="sd">        ``closecomment``    ``#}``</span>
<span class="sd">        ==================  =======</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># token.split_contents() isn&#39;t useful here because this tag doesn&#39;t accept</span>
    <span class="c1"># variable as arguments.</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;&#39;templatetag&#39; statement takes one argument&quot;</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">TemplateTagNode</span><span class="o">.</span><span class="n">mapping</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid templatetag argument: &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span>
            <span class="s2">&quot; Must be one of: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">TemplateTagNode</span><span class="o">.</span><span class="n">mapping</span><span class="p">))</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">TemplateTagNode</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="url">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.url">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">url</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return an absolute URL matching the given view with its parameters.</span>

<span class="sd">    This is a way to define links that aren&#39;t tied to a particular URL</span>
<span class="sd">    configuration::</span>

<span class="sd">        {% url &quot;url_name&quot; arg1 arg2 %}</span>

<span class="sd">        or</span>

<span class="sd">        {% url &quot;url_name&quot; name1=value1 name2=value2 %}</span>

<span class="sd">    The first argument is a URL pattern name. Other arguments are</span>
<span class="sd">    space-separated values that will be filled in place of positional and</span>
<span class="sd">    keyword arguments in the URL. Don&#39;t mix positional and keyword arguments.</span>
<span class="sd">    All arguments for the URL must be present.</span>

<span class="sd">    For example, if you have a view ``app_name.views.client_details`` taking</span>
<span class="sd">    the client&#39;s id and the corresponding line in a URLconf looks like this::</span>

<span class="sd">        path(&#39;client/&lt;int:id&gt;/&#39;, views.client_details, name=&#39;client-detail-view&#39;)</span>

<span class="sd">    and this app&#39;s URLconf is included into the project&#39;s URLconf under some</span>
<span class="sd">    path::</span>

<span class="sd">        path(&#39;clients/&#39;, include(&#39;app_name.urls&#39;))</span>

<span class="sd">    then in a template you can create a link for a certain client like this::</span>

<span class="sd">        {% url &quot;client-detail-view&quot; client.id %}</span>

<span class="sd">    The URL will look like ``/clients/client/123/``.</span>

<span class="sd">    The first argument may also be the name of a template variable that will be</span>
<span class="sd">    evaluated to obtain the view name or the URL name, e.g.::</span>

<span class="sd">        {% with url_name=&quot;client-detail-view&quot; %}</span>
<span class="sd">        {% url url_name client.id %}</span>
<span class="sd">        {% endwith %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; takes at least one argument, a URL pattern name.&quot;</span> <span class="o">%</span> <span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="n">viewname</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">asvar</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
        <span class="n">asvar</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">kwarg_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;Malformed arguments to url tag&quot;</span><span class="p">)</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">URLNode</span><span class="p">(</span><span class="n">viewname</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">asvar</span><span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="verbatim">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.verbatim">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">verbatim</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stop the template engine from rendering the contents of this block tag.</span>

<span class="sd">    Usage::</span>

<span class="sd">        {% verbatim %}</span>
<span class="sd">            {% don&#39;t process this %}</span>
<span class="sd">        {% endverbatim %}</span>

<span class="sd">    You can also designate a specific closing tag block (allowing the</span>
<span class="sd">    unrendered use of ``{% endverbatim %}``)::</span>

<span class="sd">        {% verbatim myblock %}</span>
<span class="sd">            ...</span>
<span class="sd">        {% endverbatim myblock %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endverbatim&quot;</span><span class="p">,))</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">VerbatimNode</span><span class="p">(</span><span class="n">nodelist</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">()))</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span>
<div class="viewcode-block" id="widthratio">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.widthratio">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">widthratio</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For creating bar charts and such. Calculate the ratio of a given value to a</span>
<span class="sd">    maximum value, and then apply that ratio to a constant.</span>

<span class="sd">    For example::</span>

<span class="sd">        &lt;img src=&quot;bar.png&quot; alt=&quot;Bar&quot;</span>
<span class="sd">             height=&quot;10&quot; width=&quot;{% widthratio this_value max_value max_width %}&quot;&gt;</span>

<span class="sd">    If ``this_value`` is 175, ``max_value`` is 200, and ``max_width`` is 100,</span>
<span class="sd">    the image in the above example will be 88 pixels wide</span>
<span class="sd">    (because 175/200 = .875; .875 * 100 = 87.5 which is rounded up to 88).</span>

<span class="sd">    In some cases you might want to capture the result of widthratio in a</span>
<span class="sd">    variable. It can be useful for instance in a blocktranslate like this::</span>

<span class="sd">        {% widthratio this_value max_value max_width as width %}</span>
<span class="sd">        {% blocktranslate %}The width is: {{ width }}{% endblocktranslate %}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">tag</span><span class="p">,</span> <span class="n">this_value_expr</span><span class="p">,</span> <span class="n">max_value_expr</span><span class="p">,</span> <span class="n">max_width</span> <span class="o">=</span> <span class="n">bits</span>
        <span class="n">asvar</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
        <span class="n">tag</span><span class="p">,</span> <span class="n">this_value_expr</span><span class="p">,</span> <span class="n">max_value_expr</span><span class="p">,</span> <span class="n">max_width</span><span class="p">,</span> <span class="n">as_</span><span class="p">,</span> <span class="n">asvar</span> <span class="o">=</span> <span class="n">bits</span>
        <span class="k">if</span> <span class="n">as_</span> <span class="o">!=</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid syntax in widthratio tag. Expecting &#39;as&#39; keyword&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span><span class="s2">&quot;widthratio takes at least three arguments&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">WidthRatioNode</span><span class="p">(</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">this_value_expr</span><span class="p">),</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">max_value_expr</span><span class="p">),</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">compile_filter</span><span class="p">(</span><span class="n">max_width</span><span class="p">),</span>
        <span class="n">asvar</span><span class="o">=</span><span class="n">asvar</span><span class="p">,</span>
    <span class="p">)</span></div>



<span class="nd">@register</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="s2">&quot;with&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="do_with">
<a class="viewcode-back" href="../../../autoapi/django/template/defaulttags/index.html#django.template.defaulttags.do_with">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">do_with</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add one or more values to the context (inside of this block) for caching</span>
<span class="sd">    and easy access.</span>

<span class="sd">    For example::</span>

<span class="sd">        {% with total=person.some_sql_method %}</span>
<span class="sd">            {{ total }} object{{ total|pluralize }}</span>
<span class="sd">        {% endwith %}</span>

<span class="sd">    Multiple values can be added to the context::</span>

<span class="sd">        {% with foo=1 bar=2 %}</span>
<span class="sd">            ...</span>
<span class="sd">        {% endwith %}</span>

<span class="sd">    The legacy format of ``{% with person.some_sql_method as total %}`` is</span>
<span class="sd">    still accepted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split_contents</span><span class="p">()</span>
    <span class="n">remaining_bits</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">extra_context</span> <span class="o">=</span> <span class="n">token_kwargs</span><span class="p">(</span><span class="n">remaining_bits</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">support_legacy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">extra_context</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> expected at least one variable assignment&quot;</span> <span class="o">%</span> <span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">remaining_bits</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TemplateSyntaxError</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> received an invalid token: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">remaining_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="p">)</span>
    <span class="n">nodelist</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">((</span><span class="s2">&quot;endwith&quot;</span><span class="p">,))</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">delete_first_token</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">WithNode</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">nodelist</span><span class="p">,</span> <span class="n">extra_context</span><span class="o">=</span><span class="n">extra_context</span><span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>