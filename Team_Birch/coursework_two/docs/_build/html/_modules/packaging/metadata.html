

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>packaging.metadata &mdash; Coursework Two 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Coursework Two
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage_instructions.html">Usage Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture_overview.html">Architecture Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Coursework Two</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">packaging.metadata</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for packaging.metadata</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">email.feedparser</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">email.header</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">email.message</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">email.parser</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">email.policy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">typing</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">TypedDict</span><span class="p">,</span> <span class="n">cast</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">licenses</span><span class="p">,</span> <span class="n">requirements</span><span class="p">,</span> <span class="n">specifiers</span><span class="p">,</span> <span class="n">utils</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">version</span> <span class="k">as</span> <span class="n">version_module</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.licenses</span><span class="w"> </span><span class="kn">import</span> <span class="n">NormalizedLicenseExpression</span>

<div class="viewcode-block" id="T">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.T">[docs]</a>
<span class="n">T</span> <span class="o">=</span> <span class="n">typing</span><span class="o">.</span><span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span></div>



<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
<div class="viewcode-block" id="ExceptionGroup">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.ExceptionGroup">[docs]</a>
    <span class="n">ExceptionGroup</span> <span class="o">=</span> <span class="n">ExceptionGroup</span></div>

<span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">ExceptionGroup</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A minimal implementation of :external:exc:`ExceptionGroup` from Python 3.11.</span>

<span class="sd">        If :external:exc:`ExceptionGroup` is already defined by Python itself,</span>
<span class="sd">        that version is used instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
        <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exceptions</span> <span class="o">=</span> <span class="n">exceptions</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">exceptions</span><span class="si">!r}</span><span class="s2">)&quot;</span>


<div class="viewcode-block" id="InvalidMetadata">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.InvalidMetadata">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">InvalidMetadata</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A metadata field contains invalid data.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="InvalidMetadata.field">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.InvalidMetadata.field">[docs]</a>
    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;The name of the field that contains invalid data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="n">field</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>



<span class="c1"># The RawMetadata class attempts to make as few assumptions about the underlying</span>
<span class="c1"># serialization formats as possible. The idea is that as long as a serialization</span>
<span class="c1"># formats offer some very basic primitives in *some* way then we can support</span>
<span class="c1"># serializing to and from that format.</span>
<div class="viewcode-block" id="RawMetadata">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RawMetadata</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A dictionary of raw core metadata.</span>

<span class="sd">    Each field in core metadata maps to a key of this dictionary (when data is</span>
<span class="sd">    provided). The key is lower-case and underscores are used instead of dashes</span>
<span class="sd">    compared to the equivalent core metadata field. Any core metadata field that</span>
<span class="sd">    can be specified multiple times or can hold multiple values in a single</span>
<span class="sd">    field have a key with a plural name. See :class:`Metadata` whose attributes</span>
<span class="sd">    match the keys of this dictionary.</span>

<span class="sd">    Core metadata fields that can be specified multiple times are stored as a</span>
<span class="sd">    list or dict depending on which is appropriate for the field. Any fields</span>
<span class="sd">    which hold multiple values in a single field are stored as a list.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Metadata 1.0 - PEP 241</span>
<div class="viewcode-block" id="RawMetadata.metadata_version">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.metadata_version">[docs]</a>
    <span class="n">metadata_version</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.name">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.name">[docs]</a>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.version">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.version">[docs]</a>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.platforms">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.platforms">[docs]</a>
    <span class="n">platforms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.summary">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.summary">[docs]</a>
    <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.description">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.description">[docs]</a>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.keywords">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.keywords">[docs]</a>
    <span class="n">keywords</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.home_page">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.home_page">[docs]</a>
    <span class="n">home_page</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.author">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.author">[docs]</a>
    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.author_email">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.author_email">[docs]</a>
    <span class="n">author_email</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.license">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.license">[docs]</a>
    <span class="n">license</span><span class="p">:</span> <span class="nb">str</span></div>


    <span class="c1"># Metadata 1.1 - PEP 314</span>
<div class="viewcode-block" id="RawMetadata.supported_platforms">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.supported_platforms">[docs]</a>
    <span class="n">supported_platforms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.download_url">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.download_url">[docs]</a>
    <span class="n">download_url</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.classifiers">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.classifiers">[docs]</a>
    <span class="n">classifiers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.requires">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.requires">[docs]</a>
    <span class="n">requires</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.provides">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.provides">[docs]</a>
    <span class="n">provides</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.obsoletes">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.obsoletes">[docs]</a>
    <span class="n">obsoletes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>


    <span class="c1"># Metadata 1.2 - PEP 345</span>
<div class="viewcode-block" id="RawMetadata.maintainer">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.maintainer">[docs]</a>
    <span class="n">maintainer</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.maintainer_email">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.maintainer_email">[docs]</a>
    <span class="n">maintainer_email</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.requires_dist">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.requires_dist">[docs]</a>
    <span class="n">requires_dist</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.provides_dist">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.provides_dist">[docs]</a>
    <span class="n">provides_dist</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.obsoletes_dist">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.obsoletes_dist">[docs]</a>
    <span class="n">obsoletes_dist</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.requires_python">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.requires_python">[docs]</a>
    <span class="n">requires_python</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.requires_external">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.requires_external">[docs]</a>
    <span class="n">requires_external</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>

<div class="viewcode-block" id="RawMetadata.project_urls">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.project_urls">[docs]</a>
    <span class="n">project_urls</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></div>


    <span class="c1"># Metadata 2.0</span>
    <span class="c1"># PEP 426 attempted to completely revamp the metadata format</span>
    <span class="c1"># but got stuck without ever being able to build consensus on</span>
    <span class="c1"># it and ultimately ended up withdrawn.</span>
    <span class="c1">#</span>
    <span class="c1"># However, a number of tools had started emitting METADATA with</span>
    <span class="c1"># `2.0` Metadata-Version, so for historical reasons, this version</span>
    <span class="c1"># was skipped.</span>

    <span class="c1"># Metadata 2.1 - PEP 566</span>
<div class="viewcode-block" id="RawMetadata.description_content_type">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.description_content_type">[docs]</a>
    <span class="n">description_content_type</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.provides_extra">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.provides_extra">[docs]</a>
    <span class="n">provides_extra</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>


    <span class="c1"># Metadata 2.2 - PEP 643</span>
<div class="viewcode-block" id="RawMetadata.dynamic">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.dynamic">[docs]</a>
    <span class="n">dynamic</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>


    <span class="c1"># Metadata 2.3 - PEP 685</span>
    <span class="c1"># No new fields were added in PEP 685, just some edge case were</span>
    <span class="c1"># tightened up to provide better interoptability.</span>

    <span class="c1"># Metadata 2.4 - PEP 639</span>
<div class="viewcode-block" id="RawMetadata.license_expression">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.license_expression">[docs]</a>
    <span class="n">license_expression</span><span class="p">:</span> <span class="nb">str</span></div>

<div class="viewcode-block" id="RawMetadata.license_files">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.RawMetadata.license_files">[docs]</a>
    <span class="n">license_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></div>
</div>



<span class="n">_STRING_FIELDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;author&quot;</span><span class="p">,</span>
    <span class="s2">&quot;author_email&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description_content_type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;download_url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;home_page&quot;</span><span class="p">,</span>
    <span class="s2">&quot;license&quot;</span><span class="p">,</span>
    <span class="s2">&quot;license_expression&quot;</span><span class="p">,</span>
    <span class="s2">&quot;maintainer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;maintainer_email&quot;</span><span class="p">,</span>
    <span class="s2">&quot;metadata_version&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires_python&quot;</span><span class="p">,</span>
    <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_LIST_FIELDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;classifiers&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;license_files&quot;</span><span class="p">,</span>
    <span class="s2">&quot;obsoletes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;obsoletes_dist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;platforms&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provides&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provides_dist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provides_extra&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires_dist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires_external&quot;</span><span class="p">,</span>
    <span class="s2">&quot;supported_platforms&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">_DICT_FIELDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;project_urls&quot;</span><span class="p">,</span>
<span class="p">}</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_parse_keywords</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Split a string of comma-separated keywords into a list of keywords.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_parse_project_urls</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a list of label/URL string pairings separated by a comma.&quot;&quot;&quot;</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="c1"># Our logic is slightly tricky here as we want to try and do</span>
        <span class="c1"># *something* reasonable with malformed data.</span>
        <span class="c1">#</span>
        <span class="c1"># The main thing that we have to worry about, is data that does</span>
        <span class="c1"># not have a &#39;,&#39; at all to split the label from the Value. There</span>
        <span class="c1"># isn&#39;t a singular right answer here, and we will fail validation</span>
        <span class="c1"># later on (if the caller is validating) so it doesn&#39;t *really*</span>
        <span class="c1"># matter, but since the missing value has to be an empty str</span>
        <span class="c1"># and our return value is dict[str, str], if we let the key</span>
        <span class="c1"># be the missing value, then they&#39;d have multiple &#39;&#39; values that</span>
        <span class="c1"># overwrite each other in a accumulating dict.</span>
        <span class="c1">#</span>
        <span class="c1"># The other potentional issue is that it&#39;s possible to have the</span>
        <span class="c1"># same label multiple times in the metadata, with no solid &quot;right&quot;</span>
        <span class="c1"># answer with what to do in that case. As such, we&#39;ll do the only</span>
        <span class="c1"># thing we can, which is treat the field as unparseable and add it</span>
        <span class="c1"># to our list of unparsed fields.</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pair</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">))))</span>  <span class="c1"># Ensure 2 items</span>

        <span class="c1"># TODO: The spec doesn&#39;t say anything about if the keys should be</span>
        <span class="c1">#       considered case sensitive or not... logically they should</span>
        <span class="c1">#       be case-preserving and case-insensitive, but doing that</span>
        <span class="c1">#       would open up more cases where we might have duplicate</span>
        <span class="c1">#       entries.</span>
        <span class="n">label</span><span class="p">,</span> <span class="n">url</span> <span class="o">=</span> <span class="n">parts</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
            <span class="c1"># The label already exists in our set of urls, so this field</span>
            <span class="c1"># is unparseable, and we can just add the whole thing to our</span>
            <span class="c1"># unparseable data and stop processing it.</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;duplicate labels in project urls&quot;</span><span class="p">)</span>
        <span class="n">urls</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>

    <span class="k">return</span> <span class="n">urls</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_get_payload</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">email</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">Message</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the body of the message.&quot;&quot;&quot;</span>
    <span class="c1"># If our source is a str, then our caller has managed encodings for us,</span>
    <span class="c1"># and we don&#39;t need to deal with it.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">get_payload</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">payload</span>
    <span class="c1"># If our source is a bytes, then we&#39;re managing the encoding and we need</span>
    <span class="c1"># to deal with it.</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bpayload</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">get_payload</span><span class="p">(</span><span class="n">decode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bpayload</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bpayload</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">UnicodeDecodeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;payload in an invalid encoding&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>


<span class="c1"># The various parse_FORMAT functions here are intended to be as lenient as</span>
<span class="c1"># possible in their parsing, while still returning a correctly typed</span>
<span class="c1"># RawMetadata.</span>
<span class="c1">#</span>
<span class="c1"># To aid in this, we also generally want to do as little touching of the</span>
<span class="c1"># data as possible, except where there are possibly some historic holdovers</span>
<span class="c1"># that make valid data awkward to work with.</span>
<span class="c1">#</span>
<span class="c1"># While this is a lower level, intermediate format than our ``Metadata``</span>
<span class="c1"># class, some light touch ups can make a massive difference in usability.</span>

<span class="c1"># Map METADATA fields to RawMetadata.</span>
<span class="n">_EMAIL_TO_RAW_MAPPING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;author&quot;</span><span class="p">,</span>
    <span class="s2">&quot;author-email&quot;</span><span class="p">:</span> <span class="s2">&quot;author_email&quot;</span><span class="p">,</span>
    <span class="s2">&quot;classifier&quot;</span><span class="p">:</span> <span class="s2">&quot;classifiers&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description-content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;description_content_type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;download-url&quot;</span><span class="p">:</span> <span class="s2">&quot;download_url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic&quot;</span><span class="p">:</span> <span class="s2">&quot;dynamic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;home-page&quot;</span><span class="p">:</span> <span class="s2">&quot;home_page&quot;</span><span class="p">,</span>
    <span class="s2">&quot;keywords&quot;</span><span class="p">:</span> <span class="s2">&quot;keywords&quot;</span><span class="p">,</span>
    <span class="s2">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;license&quot;</span><span class="p">,</span>
    <span class="s2">&quot;license-expression&quot;</span><span class="p">:</span> <span class="s2">&quot;license_expression&quot;</span><span class="p">,</span>
    <span class="s2">&quot;license-file&quot;</span><span class="p">:</span> <span class="s2">&quot;license_files&quot;</span><span class="p">,</span>
    <span class="s2">&quot;maintainer&quot;</span><span class="p">:</span> <span class="s2">&quot;maintainer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;maintainer-email&quot;</span><span class="p">:</span> <span class="s2">&quot;maintainer_email&quot;</span><span class="p">,</span>
    <span class="s2">&quot;metadata-version&quot;</span><span class="p">:</span> <span class="s2">&quot;metadata_version&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;obsoletes&quot;</span><span class="p">:</span> <span class="s2">&quot;obsoletes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;obsoletes-dist&quot;</span><span class="p">:</span> <span class="s2">&quot;obsoletes_dist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;platforms&quot;</span><span class="p">,</span>
    <span class="s2">&quot;project-url&quot;</span><span class="p">:</span> <span class="s2">&quot;project_urls&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provides&quot;</span><span class="p">:</span> <span class="s2">&quot;provides&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provides-dist&quot;</span><span class="p">:</span> <span class="s2">&quot;provides_dist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;provides-extra&quot;</span><span class="p">:</span> <span class="s2">&quot;provides_extra&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires&quot;</span><span class="p">:</span> <span class="s2">&quot;requires&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires-dist&quot;</span><span class="p">:</span> <span class="s2">&quot;requires_dist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires-external&quot;</span><span class="p">:</span> <span class="s2">&quot;requires_external&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requires-python&quot;</span><span class="p">:</span> <span class="s2">&quot;requires_python&quot;</span><span class="p">,</span>
    <span class="s2">&quot;summary&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
    <span class="s2">&quot;supported-platform&quot;</span><span class="p">:</span> <span class="s2">&quot;supported_platforms&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;version&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">_RAW_TO_EMAIL_MAPPING</span> <span class="o">=</span> <span class="p">{</span><span class="n">raw</span><span class="p">:</span> <span class="n">email</span> <span class="k">for</span> <span class="n">email</span><span class="p">,</span> <span class="n">raw</span> <span class="ow">in</span> <span class="n">_EMAIL_TO_RAW_MAPPING</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>


<div class="viewcode-block" id="parse_email">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.parse_email">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">parse_email</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">RawMetadata</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse a distribution&#39;s metadata stored as email headers (e.g. from ``METADATA``).</span>

<span class="sd">    This function returns a two-item tuple of dicts. The first dict is of</span>
<span class="sd">    recognized fields from the core metadata specification. Fields that can be</span>
<span class="sd">    parsed and translated into Python&#39;s built-in types are converted</span>
<span class="sd">    appropriately. All other fields are left as-is. Fields that are allowed to</span>
<span class="sd">    appear multiple times are stored as lists.</span>

<span class="sd">    The second dict contains all other fields from the metadata. This includes</span>
<span class="sd">    any unrecognized fields. It also includes any fields which are expected to</span>
<span class="sd">    be parsed into a built-in type but were not formatted appropriately. Finally,</span>
<span class="sd">    any fields that are expected to appear only once but are repeated are</span>
<span class="sd">    included in this dict.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">raw</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">unparsed</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">Parser</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">email</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">compat32</span><span class="p">)</span><span class="o">.</span><span class="n">parsestr</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">BytesParser</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">email</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">compat32</span><span class="p">)</span><span class="o">.</span><span class="n">parsebytes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># We have to wrap parsed.keys() in a set, because in the case of multiple</span>
    <span class="c1"># values for a key (a list), the key will appear multiple times in the</span>
    <span class="c1"># list of keys, but we&#39;re avoiding that by using get_all().</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">parsed</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="c1"># Header names in RFC are case insensitive, so we&#39;ll normalize to all</span>
        <span class="c1"># lower case to make comparisons easier.</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="c1"># We use get_all() here, even for fields that aren&#39;t multiple use,</span>
        <span class="c1"># because otherwise someone could have e.g. two Name fields, and we</span>
        <span class="c1"># would just silently ignore it rather than doing something about it.</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">parsed</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]</span>

        <span class="c1"># The way the email module works when parsing bytes is that it</span>
        <span class="c1"># unconditionally decodes the bytes as ascii using the surrogateescape</span>
        <span class="c1"># handler. When you pull that data back out (such as with get_all() ),</span>
        <span class="c1"># it looks to see if the str has any surrogate escapes, and if it does</span>
        <span class="c1"># it wraps it in a Header object instead of returning the string.</span>
        <span class="c1">#</span>
        <span class="c1"># As such, we&#39;ll look for those Header objects, and fix up the encoding.</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Flag if we have run into any issues processing the headers, thus</span>
        <span class="c1"># signalling that the data belongs in &#39;unparsed&#39;.</span>
        <span class="n">valid_encoding</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
            <span class="c1"># It&#39;s unclear if this can return more types than just a Header or</span>
            <span class="c1"># a str, so we&#39;ll just assert here to make sure.</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="p">(</span><span class="n">email</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">Header</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span>

            <span class="c1"># If it&#39;s a header object, we need to do our little dance to get</span>
            <span class="c1"># the real data out of it. In cases where there is invalid data</span>
            <span class="c1"># we&#39;re going to end up with mojibake, but there&#39;s no obvious, good</span>
            <span class="c1"># way around that without reimplementing parts of the Header object</span>
            <span class="c1"># ourselves.</span>
            <span class="c1">#</span>
            <span class="c1"># That should be fine since, if mojibacked happens, this key is</span>
            <span class="c1"># going into the unparsed dict anyways.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">email</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">Header</span><span class="p">):</span>
                <span class="c1"># The Header object stores it&#39;s data as chunks, and each chunk</span>
                <span class="c1"># can be independently encoded, so we&#39;ll need to check each</span>
                <span class="c1"># of them.</span>
                <span class="n">chunks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="nb">bin</span><span class="p">,</span> <span class="n">encoding</span> <span class="ow">in</span> <span class="n">email</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">decode_header</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="nb">bin</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
                        <span class="c1"># Enable mojibake.</span>
                        <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;latin1&quot;</span>
                        <span class="n">valid_encoding</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;utf8&quot;</span>
                    <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">bin</span><span class="p">,</span> <span class="n">encoding</span><span class="p">))</span>

                <span class="c1"># Turn our chunks back into a Header object, then let that</span>
                <span class="c1"># Header object do the right thing to turn them into a</span>
                <span class="c1"># string for us.</span>
                <span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">email</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">make_header</span><span class="p">(</span><span class="n">chunks</span><span class="p">)))</span>
            <span class="c1"># This is already a string, so just add it.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>

        <span class="c1"># We&#39;ve processed all of our values to get them into a list of str,</span>
        <span class="c1"># but we may have mojibake data, in which case this is an unparsed</span>
        <span class="c1"># field.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_encoding</span><span class="p">:</span>
            <span class="n">unparsed</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">continue</span>

        <span class="n">raw_name</span> <span class="o">=</span> <span class="n">_EMAIL_TO_RAW_MAPPING</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raw_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># This is a bit of a weird situation, we&#39;ve encountered a key that</span>
            <span class="c1"># we don&#39;t know what it means, so we don&#39;t know whether it&#39;s meant</span>
            <span class="c1"># to be a list or not.</span>
            <span class="c1">#</span>
            <span class="c1"># Since we can&#39;t really tell one way or another, we&#39;ll just leave it</span>
            <span class="c1"># as a list, even though it may be a single item list, because that&#39;s</span>
            <span class="c1"># what makes the most sense for email headers.</span>
            <span class="n">unparsed</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">continue</span>

        <span class="c1"># If this is one of our string fields, then we&#39;ll check to see if our</span>
        <span class="c1"># value is a list of a single item. If it is then we&#39;ll assume that</span>
        <span class="c1"># it was emitted as a single string, and unwrap the str from inside</span>
        <span class="c1"># the list.</span>
        <span class="c1">#</span>
        <span class="c1"># If it&#39;s any other kind of data, then we haven&#39;t the faintest clue</span>
        <span class="c1"># what we should parse it as, and we have to just add it to our list</span>
        <span class="c1"># of unparsed stuff.</span>
        <span class="k">if</span> <span class="n">raw_name</span> <span class="ow">in</span> <span class="n">_STRING_FIELDS</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">raw</span><span class="p">[</span><span class="n">raw_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># If this is one of our list of string fields, then we can just assign</span>
        <span class="c1"># the value, since email *only* has strings, and our get_all() call</span>
        <span class="c1"># above ensures that this is a list.</span>
        <span class="k">elif</span> <span class="n">raw_name</span> <span class="ow">in</span> <span class="n">_LIST_FIELDS</span><span class="p">:</span>
            <span class="n">raw</span><span class="p">[</span><span class="n">raw_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Special Case: Keywords</span>
        <span class="c1"># The keywords field is implemented in the metadata spec as a str,</span>
        <span class="c1"># but it conceptually is a list of strings, and is serialized using</span>
        <span class="c1"># &quot;, &quot;.join(keywords), so we&#39;ll do some light data massaging to turn</span>
        <span class="c1"># this into what it logically is.</span>
        <span class="k">elif</span> <span class="n">raw_name</span> <span class="o">==</span> <span class="s2">&quot;keywords&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">raw</span><span class="p">[</span><span class="n">raw_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_parse_keywords</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c1"># Special Case: Project-URL</span>
        <span class="c1"># The project urls is implemented in the metadata spec as a list of</span>
        <span class="c1"># specially-formatted strings that represent a key and a value, which</span>
        <span class="c1"># is fundamentally a mapping, however the email format doesn&#39;t support</span>
        <span class="c1"># mappings in a sane way, so it was crammed into a list of strings</span>
        <span class="c1"># instead.</span>
        <span class="c1">#</span>
        <span class="c1"># We will do a little light data massaging to turn this into a map as</span>
        <span class="c1"># it logically should be.</span>
        <span class="k">elif</span> <span class="n">raw_name</span> <span class="o">==</span> <span class="s2">&quot;project_urls&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">raw</span><span class="p">[</span><span class="n">raw_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_parse_project_urls</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">unparsed</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># Nothing that we&#39;ve done has managed to parse this, so it&#39;ll just</span>
        <span class="c1"># throw it in our unparseable data and move on.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">unparsed</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># We need to support getting the Description from the message payload in</span>
    <span class="c1"># addition to getting it from the the headers. This does mean, though, there</span>
    <span class="c1"># is the possibility of it being set both ways, in which case we put both</span>
    <span class="c1"># in &#39;unparsed&#39; since we don&#39;t know which is right.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">_get_payload</span><span class="p">(</span><span class="n">parsed</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">unparsed</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">parsed</span><span class="o">.</span><span class="n">get_payload</span><span class="p">(</span><span class="n">decode</span><span class="o">=</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">))</span>  <span class="c1"># type: ignore[call-overload]</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">payload</span><span class="p">:</span>
            <span class="c1"># Check to see if we&#39;ve already got a description, if so then both</span>
            <span class="c1"># it, and this body move to unparseable.</span>
            <span class="k">if</span> <span class="s2">&quot;description&quot;</span> <span class="ow">in</span> <span class="n">raw</span><span class="p">:</span>
                <span class="n">description_header</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">raw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">))</span>
                <span class="n">unparsed</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">description_header</span><span class="p">,</span> <span class="n">payload</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;description&quot;</span> <span class="ow">in</span> <span class="n">unparsed</span><span class="p">:</span>
                <span class="n">unparsed</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">raw</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">payload</span>

    <span class="c1"># We need to cast our `raw` to a metadata, because a TypedDict only support</span>
    <span class="c1"># literal key names, but we&#39;re computing our key names on purpose, but the</span>
    <span class="c1"># way this function is implemented, our `TypedDict` can only have valid key</span>
    <span class="c1"># names.</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">RawMetadata</span><span class="p">,</span> <span class="n">raw</span><span class="p">),</span> <span class="n">unparsed</span></div>



<span class="n">_NOT_FOUND</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>


<span class="c1"># Keep the two values in sync.</span>
<span class="n">_VALID_METADATA_VERSIONS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;1.1&quot;</span><span class="p">,</span> <span class="s2">&quot;1.2&quot;</span><span class="p">,</span> <span class="s2">&quot;2.1&quot;</span><span class="p">,</span> <span class="s2">&quot;2.2&quot;</span><span class="p">,</span> <span class="s2">&quot;2.3&quot;</span><span class="p">,</span> <span class="s2">&quot;2.4&quot;</span><span class="p">]</span>
<span class="n">_MetadataVersion</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;1.1&quot;</span><span class="p">,</span> <span class="s2">&quot;1.2&quot;</span><span class="p">,</span> <span class="s2">&quot;2.1&quot;</span><span class="p">,</span> <span class="s2">&quot;2.2&quot;</span><span class="p">,</span> <span class="s2">&quot;2.3&quot;</span><span class="p">,</span> <span class="s2">&quot;2.4&quot;</span><span class="p">]</span>

<span class="n">_REQUIRED_ATTRS</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">([</span><span class="s2">&quot;metadata_version&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">])</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_Validator</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate a metadata field.</span>

<span class="sd">    All _process_*() methods correspond to a core metadata field. The method is</span>
<span class="sd">    called with the field&#39;s raw value. If the raw value is valid it is returned</span>
<span class="sd">    in its &quot;enriched&quot; form (e.g. ``version.Version`` for the ``Version`` field).</span>
<span class="sd">    If the raw value is invalid, :exc:`InvalidMetadata` is raised (with a cause</span>
<span class="sd">    as appropriate).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">raw_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">added</span><span class="p">:</span> <span class="n">_MetadataVersion</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">added</span><span class="p">:</span> <span class="n">_MetadataVersion</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">added</span> <span class="o">=</span> <span class="n">added</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__set_name__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_owner</span><span class="p">:</span> <span class="n">Metadata</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span> <span class="o">=</span> <span class="n">_RAW_TO_EMAIL_MAPPING</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Metadata</span><span class="p">,</span> <span class="n">_owner</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">Metadata</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="c1"># With Python 3.8, the caching can be replaced with functools.cached_property().</span>
        <span class="c1"># No need to check the cache as attribute lookup will resolve into the</span>
        <span class="c1"># instance&#39;s __dict__ before __get__ is called.</span>
        <span class="n">cache</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="vm">__dict__</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">_raw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># To make the _process_* methods easier, we&#39;ll check if the value is None</span>
        <span class="c1"># and if this field is NOT a required attribute, and if both of those</span>
        <span class="c1"># things are true, we&#39;ll skip the the converter. This will mean that the</span>
        <span class="c1"># converters never have to deal with the None union.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">_REQUIRED_ATTRS</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">converter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_process_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">converter</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="n">cache</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">instance</span><span class="o">.</span><span class="n">_raw</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>  <span class="c1"># type: ignore[misc]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_invalid_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cause</span><span class="p">:</span> <span class="ne">Exception</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InvalidMetadata</span><span class="p">:</span>
        <span class="n">exc</span> <span class="o">=</span> <span class="n">InvalidMetadata</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">format_map</span><span class="p">({</span><span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_name</span><span class="p">)})</span>
        <span class="p">)</span>
        <span class="n">exc</span><span class="o">.</span><span class="n">__cause__</span> <span class="o">=</span> <span class="n">cause</span>
        <span class="k">return</span> <span class="n">exc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_metadata_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_MetadataVersion</span><span class="p">:</span>
        <span class="c1"># Implicitly makes Metadata-Version required.</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_VALID_METADATA_VERSIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is not a valid metadata version&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">_MetadataVersion</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{field}</span><span class="s2"> is a required field&quot;</span><span class="p">)</span>
        <span class="c1"># Validate the name as a side-effect.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">canonicalize_name</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">utils</span><span class="o">.</span><span class="n">InvalidName</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">exc</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">version_module</span><span class="o">.</span><span class="n">Version</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{field}</span><span class="s2"> is a required field&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">version_module</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">version_module</span><span class="o">.</span><span class="n">InvalidVersion</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">exc</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check the field contains no newlines.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{field}</span><span class="s2"> must be a single line&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_description_content_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">content_types</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;text/plain&quot;</span><span class="p">,</span> <span class="s2">&quot;text/x-rst&quot;</span><span class="p">,</span> <span class="s2">&quot;text/markdown&quot;</span><span class="p">}</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">EmailMessage</span><span class="p">()</span>
        <span class="n">message</span><span class="p">[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">content_type</span><span class="p">,</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span>
            <span class="c1"># Defaults to `text/plain` if parsing failed.</span>
            <span class="n">message</span><span class="o">.</span><span class="n">get_content_type</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
            <span class="n">message</span><span class="p">[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Check if content-type is valid or defaulted to `text/plain` and thus was</span>
        <span class="c1"># not parseable.</span>
        <span class="k">if</span> <span class="n">content_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">content_types</span> <span class="ow">or</span> <span class="n">content_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2"> must be one of </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">content_types</span><span class="p">)</span><span class="si">}</span><span class="s2">, not </span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">charset</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;charset&quot;</span><span class="p">,</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">charset</span> <span class="o">!=</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2"> can only specify the UTF-8 charset, not </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">charset</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">markdown_variants</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;GFM&quot;</span><span class="p">,</span> <span class="s2">&quot;CommonMark&quot;</span><span class="p">}</span>
        <span class="n">variant</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;variant&quot;</span><span class="p">,</span> <span class="s2">&quot;GFM&quot;</span><span class="p">)</span>  <span class="c1"># Use an acceptable default.</span>
        <span class="k">if</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s2">&quot;text/markdown&quot;</span> <span class="ow">and</span> <span class="n">variant</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">markdown_variants</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;valid Markdown variants for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2"> are </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">markdown_variants</span><span class="p">)</span><span class="si">}</span><span class="s2">, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;not </span><span class="si">{</span><span class="n">variant</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_dynamic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">dynamic_field</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">dynamic_field</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="s2">&quot;metadata-version&quot;</span><span class="p">}:</span>
                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dynamic_field</span><span class="si">!r}</span><span class="s2"> is not allowed as a dynamic field&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">dynamic_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_EMAIL_TO_RAW_MAPPING</span><span class="p">:</span>
                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dynamic_field</span><span class="si">!r}</span><span class="s2"> is not a valid dynamic field&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_provides_extra</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">NormalizedName</span><span class="p">]:</span>
        <span class="n">normalized_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">normalized_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">canonicalize_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">utils</span><span class="o">.</span><span class="n">InvalidName</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">exc</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">normalized_names</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_requires_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">specifiers</span><span class="o">.</span><span class="n">SpecifierSet</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">specifiers</span><span class="o">.</span><span class="n">SpecifierSet</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">specifiers</span><span class="o">.</span><span class="n">InvalidSpecifier</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">exc</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_requires_dist</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">requirements</span><span class="o">.</span><span class="n">Requirement</span><span class="p">]:</span>
        <span class="n">reqs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">reqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">requirements</span><span class="o">.</span><span class="n">Requirement</span><span class="p">(</span><span class="n">req</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">requirements</span><span class="o">.</span><span class="n">InvalidRequirement</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">req</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">exc</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">reqs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_license_expression</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NormalizedLicenseExpression</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">licenses</span><span class="o">.</span><span class="n">canonicalize_license_expression</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="n">exc</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_license_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;..&quot;</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">, &quot;</span>
                    <span class="s2">&quot;parent directory indicators are not allowed&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">, paths must be resolved&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">pathlib</span><span class="o">.</span><span class="n">PurePosixPath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">()</span>
                <span class="ow">or</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PureWindowsPath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">()</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">, paths must be relative&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">PureWindowsPath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span> <span class="o">!=</span> <span class="n">path</span><span class="p">:</span>
                <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid_metadata</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">!r}</span><span class="s2"> is invalid for </span><span class="se">{{</span><span class="s2">field</span><span class="se">}}</span><span class="s2">, paths must use &#39;/&#39; delimiter&quot;</span>
                <span class="p">)</span>
            <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">paths</span>


<div class="viewcode-block" id="Metadata">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Metadata</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of distribution metadata.</span>

<span class="sd">    Compared to :class:`RawMetadata`, this class provides objects representing</span>
<span class="sd">    metadata fields instead of only using built-in types. Any invalid metadata</span>
<span class="sd">    will cause :exc:`InvalidMetadata` to be raised (with a</span>
<span class="sd">    :py:attr:`~BaseException.__cause__` attribute as appropriate).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_raw</span><span class="p">:</span> <span class="n">RawMetadata</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="Metadata.from_raw">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.from_raw">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_raw</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">RawMetadata</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Metadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create an instance from :class:`RawMetadata`.</span>

<span class="sd">        If *validate* is true, all metadata will be validated. All exceptions</span>
<span class="sd">        related to validation will be gathered and raised as an :class:`ExceptionGroup`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ins</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="n">ins</span><span class="o">.</span><span class="n">_raw</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Mutations occur due to caching enriched values.</span>

        <span class="k">if</span> <span class="n">validate</span><span class="p">:</span>
            <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">metadata_version</span> <span class="o">=</span> <span class="n">ins</span><span class="o">.</span><span class="n">metadata_version</span>
                <span class="n">metadata_age</span> <span class="o">=</span> <span class="n">_VALID_METADATA_VERSIONS</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">metadata_version</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">InvalidMetadata</span> <span class="k">as</span> <span class="n">metadata_version_exc</span><span class="p">:</span>
                <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metadata_version_exc</span><span class="p">)</span>
                <span class="n">metadata_version</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1"># Make sure to check for the fields that are present, the required</span>
            <span class="c1"># fields (so their absence can be reported).</span>
            <span class="n">fields_to_check</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">ins</span><span class="o">.</span><span class="n">_raw</span><span class="p">)</span> <span class="o">|</span> <span class="n">_REQUIRED_ATTRS</span>
            <span class="c1"># Remove fields that have already been checked.</span>
            <span class="n">fields_to_check</span> <span class="o">-=</span> <span class="p">{</span><span class="s2">&quot;metadata_version&quot;</span><span class="p">}</span>

            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fields_to_check</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">metadata_version</span><span class="p">:</span>
                        <span class="c1"># Can&#39;t use getattr() as that triggers descriptor protocol which</span>
                        <span class="c1"># will fail due to no value for the instance argument.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">field_metadata_version</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">added</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                            <span class="n">exc</span> <span class="o">=</span> <span class="n">InvalidMetadata</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;unrecognized field: </span><span class="si">{</span><span class="n">key</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
                            <span class="k">continue</span>
                        <span class="n">field_age</span> <span class="o">=</span> <span class="n">_VALID_METADATA_VERSIONS</span><span class="o">.</span><span class="n">index</span><span class="p">(</span>
                            <span class="n">field_metadata_version</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">field_age</span> <span class="o">&gt;</span> <span class="n">metadata_age</span><span class="p">:</span>
                            <span class="n">field</span> <span class="o">=</span> <span class="n">_RAW_TO_EMAIL_MAPPING</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                            <span class="n">exc</span> <span class="o">=</span> <span class="n">InvalidMetadata</span><span class="p">(</span>
                                <span class="n">field</span><span class="p">,</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2"> introduced in metadata version &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field_metadata_version</span><span class="si">}</span><span class="s2">, not </span><span class="si">{</span><span class="n">metadata_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
                            <span class="k">continue</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="n">ins</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">InvalidMetadata</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                    <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">exceptions</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ExceptionGroup</span><span class="p">(</span><span class="s2">&quot;invalid metadata&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ins</span></div>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="Metadata.from_email">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.from_email">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_email</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">validate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Metadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse metadata from email headers.</span>

<span class="sd">        If *validate* is true, the metadata will be validated. All exceptions</span>
<span class="sd">        related to validation will be gathered and raised as an :class:`ExceptionGroup`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">raw</span><span class="p">,</span> <span class="n">unparsed</span> <span class="o">=</span> <span class="n">parse_email</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate</span><span class="p">:</span>
            <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">unparsed_key</span> <span class="ow">in</span> <span class="n">unparsed</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">unparsed_key</span> <span class="ow">in</span> <span class="n">_EMAIL_TO_RAW_MAPPING</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unparsed_key</span><span class="si">!r}</span><span class="s2"> has invalid data&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;unrecognized field: </span><span class="si">{</span><span class="n">unparsed_key</span><span class="si">!r}</span><span class="s2">&quot;</span>
                <span class="n">exceptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">InvalidMetadata</span><span class="p">(</span><span class="n">unparsed_key</span><span class="p">,</span> <span class="n">message</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">exceptions</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ExceptionGroup</span><span class="p">(</span><span class="s2">&quot;unparsed&quot;</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_raw</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="n">validate</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ExceptionGroup</span> <span class="k">as</span> <span class="n">exc_group</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ExceptionGroup</span><span class="p">(</span>
                <span class="s2">&quot;invalid or unparsed metadata&quot;</span><span class="p">,</span> <span class="n">exc_group</span><span class="o">.</span><span class="n">exceptions</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span></div>


<div class="viewcode-block" id="Metadata.metadata_version">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.metadata_version">[docs]</a>
    <span class="n">metadata_version</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="n">_MetadataVersion</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-metadata-version`</span>
<span class="sd">    (required; validated to be a valid metadata version)&quot;&quot;&quot;</span>
    <span class="c1"># `name` is not normalized/typed to NormalizedName so as to provide access to</span>
    <span class="c1"># the original/raw name.</span>
<div class="viewcode-block" id="Metadata.name">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.name">[docs]</a>
    <span class="n">name</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-name`</span>
<span class="sd">    (required; validated using :func:`~packaging.utils.canonicalize_name` and its</span>
<span class="sd">    *validate* parameter)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.version">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.version">[docs]</a>
    <span class="n">version</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="n">version_module</span><span class="o">.</span><span class="n">Version</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-version` (required)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.dynamic">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.dynamic">[docs]</a>
    <span class="n">dynamic</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span>
        <span class="n">added</span><span class="o">=</span><span class="s2">&quot;2.2&quot;</span><span class="p">,</span>
    <span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-dynamic`</span>
<span class="sd">    (validated against core metadata field names and lowercased)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.platforms">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.platforms">[docs]</a>
    <span class="n">platforms</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-platform`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.supported_platforms">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.supported_platforms">[docs]</a>
    <span class="n">supported_platforms</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-supported-platform`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.summary">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.summary">[docs]</a>
    <span class="n">summary</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-summary` (validated to contain no newlines)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.description">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.description">[docs]</a>
    <span class="n">description</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span>  <span class="c1"># TODO 2.1: can be in body</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-description`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.description_content_type">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.description_content_type">[docs]</a>
    <span class="n">description_content_type</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;2.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-description-content-type` (validated)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.keywords">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.keywords">[docs]</a>
    <span class="n">keywords</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-keywords`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.home_page">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.home_page">[docs]</a>
    <span class="n">home_page</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-home-page`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.download_url">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.download_url">[docs]</a>
    <span class="n">download_url</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-download-url`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.author">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.author">[docs]</a>
    <span class="n">author</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-author`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.author_email">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.author_email">[docs]</a>
    <span class="n">author_email</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-author-email`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.maintainer">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.maintainer">[docs]</a>
    <span class="n">maintainer</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-maintainer`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.maintainer_email">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.maintainer_email">[docs]</a>
    <span class="n">maintainer_email</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-maintainer-email`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.license">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.license">[docs]</a>
    <span class="n">license</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">()</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-license`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.license_expression">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.license_expression">[docs]</a>
    <span class="n">license_expression</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="n">NormalizedLicenseExpression</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span>
        <span class="n">added</span><span class="o">=</span><span class="s2">&quot;2.4&quot;</span>
    <span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-license-expression`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.license_files">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.license_files">[docs]</a>
    <span class="n">license_files</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;2.4&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-license-file`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.classifiers">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.classifiers">[docs]</a>
    <span class="n">classifiers</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-classifier`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.requires_dist">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.requires_dist">[docs]</a>
    <span class="n">requires_dist</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">requirements</span><span class="o">.</span><span class="n">Requirement</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span>
        <span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span>
    <span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-requires-dist`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.requires_python">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.requires_python">[docs]</a>
    <span class="n">requires_python</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="n">specifiers</span><span class="o">.</span><span class="n">SpecifierSet</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span>
        <span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span>
    <span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-requires-python`&quot;&quot;&quot;</span>
    <span class="c1"># Because `Requires-External` allows for non-PEP 440 version specifiers, we</span>
    <span class="c1"># don&#39;t do any processing on the values.</span>
<div class="viewcode-block" id="Metadata.requires_external">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.requires_external">[docs]</a>
    <span class="n">requires_external</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-requires-external`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.project_urls">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.project_urls">[docs]</a>
    <span class="n">project_urls</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-project-url`&quot;&quot;&quot;</span>
    <span class="c1"># PEP 685 lets us raise an error if an extra doesn&#39;t pass `Name` validation</span>
    <span class="c1"># regardless of metadata version.</span>
<div class="viewcode-block" id="Metadata.provides_extra">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.provides_extra">[docs]</a>
    <span class="n">provides_extra</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">NormalizedName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span>
        <span class="n">added</span><span class="o">=</span><span class="s2">&quot;2.1&quot;</span><span class="p">,</span>
    <span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-provides-extra`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.provides_dist">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.provides_dist">[docs]</a>
    <span class="n">provides_dist</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-provides-dist`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.obsoletes_dist">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.obsoletes_dist">[docs]</a>
    <span class="n">obsoletes_dist</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;:external:ref:`core-metadata-obsoletes-dist`&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.requires">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.requires">[docs]</a>
    <span class="n">requires</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;``Requires`` (deprecated)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.provides">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.provides">[docs]</a>
    <span class="n">provides</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;``Provides`` (deprecated)&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Metadata.obsoletes">
<a class="viewcode-back" href="../../autoapi/packaging/metadata/index.html#packaging.metadata.Metadata.obsoletes">[docs]</a>
    <span class="n">obsoletes</span><span class="p">:</span> <span class="n">_Validator</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">_Validator</span><span class="p">(</span><span class="n">added</span><span class="o">=</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span></div>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;``Obsoletes`` (deprecated)&quot;&quot;&quot;</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>