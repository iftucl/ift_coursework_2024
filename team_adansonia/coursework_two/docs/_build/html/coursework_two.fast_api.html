

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>coursework_two.fast_api package &mdash; Team Adansonia  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="coursework_two.frontend package" href="coursework_two.frontend.html" />
    <link rel="prev" title="coursework_two.data_pipeline package" href="coursework_two.data_pipeline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Team Adansonia
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">coursework_two</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="coursework_two.html">coursework_two package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="coursework_two.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="coursework_two.data_pipeline.html">coursework_two.data_pipeline package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">coursework_two.fast_api package</a></li>
<li class="toctree-l4"><a class="reference internal" href="coursework_two.frontend.html">coursework_two.frontend package</a></li>
<li class="toctree-l4"><a class="reference internal" href="coursework_two.mongo_db.html">coursework_two.mongo_db package</a></li>
<li class="toctree-l4"><a class="reference internal" href="coursework_two.utils.html">coursework_two.utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="coursework_two.validation.html">coursework_two.validation package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="coursework_two.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="coursework_two.html#module-coursework_two.main">coursework_two.main module</a></li>
<li class="toctree-l3"><a class="reference internal" href="coursework_two.html#module-coursework_two">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Team Adansonia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">coursework_two</a></li>
          <li class="breadcrumb-item"><a href="coursework_two.html">coursework_two package</a></li>
      <li class="breadcrumb-item active">coursework_two.fast_api package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/coursework_two.fast_api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="coursework-two-fast-api-package">
<h1>coursework_two.fast_api package<a class="headerlink" href="#coursework-two-fast-api-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-coursework_two.fast_api.app">
<span id="coursework-two-fast-api-app-module"></span><h2>coursework_two.fast_api.app module<a class="headerlink" href="#module-coursework_two.fast_api.app" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="coursework_two.fast_api.app.get_all_companies">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coursework_two.fast_api.app.</span></span><span class="sig-name descname"><span class="pre">get_all_companies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Database</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/coursework_two/fast_api/app.html#get_all_companies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#coursework_two.fast_api.app.get_all_companies" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="coursework_two.fast_api.app.get_company">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coursework_two.fast_api.app.</span></span><span class="sig-name descname"><span class="pre">get_company</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Database</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/coursework_two/fast_api/app.html#get_company"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#coursework_two.fast_api.app.get_company" title="Link to this definition"></a></dt>
<dd><p>Retrieves company ESG data by stock symbol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol</strong> (<em>str</em>) – The stock symbol of the company.</p></li>
<li><p><strong>year</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – The specific year to filter ESG data (optional).</p></li>
<li><p><strong>db</strong> (<em>Database</em>) – MongoDB database dependency.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>If <cite>year</cite> is provided: filtered ESG data for that year by category.</p></li>
<li><p>If <cite>year</cite> is not provided: full company record excluding MongoDB’s _id field.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>HTTPException</strong> – 404 if the company is not found in the database.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-coursework_two.fast_api.app2">
<span id="coursework-two-fast-api-app2-module"></span><h2>coursework_two.fast_api.app2 module<a class="headerlink" href="#module-coursework_two.fast_api.app2" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="coursework_two.fast_api.app2.get_company_new">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coursework_two.fast_api.app2.</span></span><span class="sig-name descname"><span class="pre">get_company_new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Database</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Depends(get_db)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/coursework_two/fast_api/app2.html#get_company_new"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#coursework_two.fast_api.app2.get_company_new" title="Link to this definition"></a></dt>
<dd><p>Retrieve ESG (Environmental, Social, and Governance) data for a given company symbol.</p>
<p>This endpoint attempts to retrieve the ESG data and goals for a company from the database.
If the requested year is not provided, it uses the latest available CSR report year.
If ESG data is missing, it attempts to refresh the data by running the pipeline.</p>
<p>Parameters:
- symbol (str): The ticker symbol of the company.
- year (Optional[str]): The specific year for which ESG data is requested. If not provided, the latest year is used.
- db (Database): The MongoDB database dependency injected via FastAPI.</p>
<p>Returns:
- dict: A dictionary containing the company symbol, year, ESG data, ESG goals, and other company metadata.</p>
<p>Raises:
- HTTPException: If the company is not found or if ESG data is unavailable.</p>
</dd></dl>

</section>
<section id="module-coursework_two.fast_api.db">
<span id="coursework-two-fast-api-db-module"></span><h2>coursework_two.fast_api.db module<a class="headerlink" href="#module-coursework_two.fast_api.db" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="coursework_two.fast_api.db.get_db">
<span class="sig-prename descclassname"><span class="pre">coursework_two.fast_api.db.</span></span><span class="sig-name descname"><span class="pre">get_db</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/coursework_two/fast_api/db.html#get_db"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#coursework_two.fast_api.db.get_db" title="Link to this definition"></a></dt>
<dd><p>Establishes a connection to the MongoDB instance and returns the ‘csr_reports’ database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A reference to the ‘csr_reports’ MongoDB database.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Database</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPException</strong><strong> (</strong><strong>500</strong><strong>)</strong> – If the database connection fails due to connection issues or unexpected errors.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-coursework_two.fast_api">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-coursework_two.fast_api" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="coursework_two.data_pipeline.html" class="btn btn-neutral float-left" title="coursework_two.data_pipeline package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="coursework_two.frontend.html" class="btn btn-neutral float-right" title="coursework_two.frontend package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Balazs.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>